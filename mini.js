eval(atob("IGNvbnN0IENPTkZJRyA9IHsgQkVUQV9UT09MX1VSTDogImh0dHBzOiBTT0ZUV0FSRToge30sIFNFUlZJQ0VfREI6IHt9LCBXQUxMUEFQRVJTOiBbXSB9OyBjb25zdCBEQl9VUkwgPSAiaHR0cHM6IGNvbnN0IFNFVFVQX0RCX1VSTCA9ICJodHRwczogY29uc3QgQURNSU5fVVVJRCA9ICJ1aWRfbWxvazJsemxxd3hrc3JseTFmayI7IGxldCBTRVJWSUNFX0RCID0ge307IGxldCBjdXJyZW50UGxheWxpc3QgPSBbXSwgY3VycmVudEluZGV4ID0gMCwgbGFzdFBsYXllZEFydCA9ICIiOyBsZXQgaW1nU3RvcmUgPSB7IHNzSG9tZTogbnVsbCwgc3NMb2NrOiBudWxsLCB3YWxsSG9tZTogbnVsbCwgd2FsbExvY2s6IG51bGwgfTsgbGV0IGN1cnJlbnRSZXBseSA9IG51bGw7IHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4geyBhcHBseUF1dG9UaGVtZSgpOyBjcmVhdGVTdGFycygpOyBjcmVhdGVNb29uKCk7IGNoZWNrVmVyaWZ5U3RhdHVzKCk7IHNldFRpbWVvdXQoKCkgPT4geyBpbml0U29mdHdhcmVEYXRhKCk7IGluaXRTZXJ2aWNlRGF0YSgpOyBsb2FkTWVzc2FnZXMoKTsgfSwgMTAwKTsgfSk7IGZ1bmN0aW9uIGFwcGx5QXV0b1RoZW1lKCkgeyBjb25zdCBwcmVmZXJzRGFyayA9IHdpbmRvdy5tYXRjaE1lZGlhKCcocHJlZmVycy1jb2xvci1zY2hlbWU6IGRhcmspJykubWF0Y2hlczsgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS10aGVtZScsIHByZWZlcnNEYXJrID8gJ2RhcmsnIDogJ2xpZ2h0Jyk7IHVwZGF0ZVRoZW1lSWNvbihwcmVmZXJzRGFyayA/ICdkYXJrJyA6ICdsaWdodCcpOyB9IGZ1bmN0aW9uIHRvZ2dsZVRoZW1lKCkgeyBjb25zdCByb290ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50OyBjb25zdCBuZXdUaGVtZSA9IHJvb3QuZ2V0QXR0cmlidXRlKCdkYXRhLXRoZW1lJykgPT09ICdkYXJrJyA/ICdsaWdodCcgOiAnZGFyayc7IHJvb3Quc2V0QXR0cmlidXRlKCdkYXRhLXRoZW1lJywgbmV3VGhlbWUpOyB1cGRhdGVUaGVtZUljb24obmV3VGhlbWUpOyB9IGZ1bmN0aW9uIHVwZGF0ZVRoZW1lSWNvbih0aGVtZSkgeyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndC1pY29uJykuY2xhc3NOYW1lID0gdGhlbWUgPT09ICdkYXJrJyA/ICJmYS1zb2xpZCBmYS1jaXJjbGUiIDogImZhLXNvbGlkIGZhLXN1biI7IH0gZnVuY3Rpb24gY3JlYXRlU3RhcnMoKSB7IHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7IGNvbnN0IGZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXJGaWVsZCcpOyBmaWVsZC5pbm5lckhUTUwgPSAnJzsgY29uc3QgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7IGNvbnN0IGNvdW50ID0gd2luZG93LmlubmVyV2lkdGggPCA3NjggPyA4MCA6IDI1MDsgZm9yKGxldCBpPTA7IGkgPCBjb3VudDsgaSsrKSB7IGNvbnN0IHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsgcy5jbGFzc05hbWUgPSAnc3Rhcic7IGNvbnN0IHNpemUgPSBNYXRoLnJhbmRvbSgpICogMzsgcy5zdHlsZS5jc3NUZXh0ID0gYHdpZHRoOiR7c2l6ZX1weDsgaGVpZ2h0OiR7c2l6ZX1weDsgdG9wOiR7TWF0aC5yYW5kb20oKSoxMDB9JTsgbGVmdDoke01hdGgucmFuZG9tKCkqMTAwfSU7IGFuaW1hdGlvbjogYmxpbmsgJHsyK01hdGgucmFuZG9tKCkqM31zIGluZmluaXRlOyBvcGFjaXR5OiR7TWF0aC5yYW5kb20oKX1gOyBmcmFnbWVudC5hcHBlbmRDaGlsZChzKTsgfSBmaWVsZC5hcHBlbmRDaGlsZChmcmFnbWVudCk7IH0pOyB9IGZ1bmN0aW9uIGNyZWF0ZU1vb24oKSB7IGlmKCFkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9vbicpKSB7IGNvbnN0IG1vb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsgbW9vbi5jbGFzc05hbWUgPSAnbW9vbic7IGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobW9vbik7IH0gfSBmdW5jdGlvbiBhdHRhY2hTY3JvbGxBbmltYXRpb24oKSB7IGNvbnN0IG9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKChlbnRyaWVzKSA9PiB7IGVudHJpZXMuZm9yRWFjaChlbnRyeSA9PiB7IGlmIChlbnRyeS5pc0ludGVyc2VjdGluZykgeyBlbnRyeS50YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuLXN0YXRlJyk7IGVudHJ5LnRhcmdldC5jbGFzc0xpc3QuYWRkKCdzY3JvbGwtYWN0aXZlJyk7IG9ic2VydmVyLnVub2JzZXJ2ZShlbnRyeS50YXJnZXQpOyB9IH0pOyB9LCB7IHRocmVzaG9sZDogMC4xIH0pOyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcud3AtY2FyZCcpLmZvckVhY2goY2FyZCA9PiB7IGNhcmQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuLXN0YXRlJyk7IG9ic2VydmVyLm9ic2VydmUoY2FyZCk7IH0pOyB9IGZ1bmN0aW9uIG9wZW5TY3JlZW4oaWQpIHsgY29uc3QgcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTsgaWYgKCFzKSByZXR1cm47IHMuc3R5bGUuZGlzcGxheSA9ICdmbGV4Jzsgc2V0VGltZW91dCgoKSA9PiB7IHMuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7IH0sIDEwKTsgaWYoaWQgPT09ICd3cFNjcicpIGluaXRXYWxscGFwZXJEYXRhKCk7IGlmKGlkID09PSAnaHdTY3InKSBpbml0SGFyZHdhcmUoKTsgaWYoaWQgPT09ICdwcmVzZXRTY3InKSBpbml0UHJlc2V0RGF0YSgpOyBpZihpZCA9PT0gJ3NldHVwU2NyJykgbG9hZFNldHVwcygpOyB9IGZ1bmN0aW9uIGNsb3NlU2NyZWVuKGlkKSB7IGNvbnN0IHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7IGlmICghcykgcmV0dXJuOyBzLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpOyBzZXRUaW1lb3V0KCgpID0+IHsgcy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOyBpZihpZCA9PT0gJ3dwU2NyJykgeyBjb25zdCBhaVNlYyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhaVNlY3Rpb24nKTsgaWYoYWlTZWMpIGFpU2VjLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IH0gfSwgNDAwKTsgfSBmdW5jdGlvbiB0b2dnbGVBSSgpIHsgY29uc3Qgc2VjdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhaVNlY3Rpb24nKTsgc2VjdGlvbi5zdHlsZS5kaXNwbGF5ID0gKHNlY3Rpb24uc3R5bGUuZGlzcGxheSA9PT0gJ25vbmUnKSA/ICdibG9jaycgOiAnbm9uZSc7IH0gZnVuY3Rpb24gdG9nZ2xlVXBsb2FkKCkgeyBjb25zdCBmID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NldHVwVXBsb2FkRm9ybScpOyBmLnN0eWxlLmRpc3BsYXkgPSAoZi5zdHlsZS5kaXNwbGF5ID09PSAnbm9uZScpID8gJ2Jsb2NrJyA6ICdub25lJzsgfSBmdW5jdGlvbiBvcGVuRGV2aWNlTWVudSgpIHsgY29uc3QgZGV2aWNlcyA9IFsgeyBuYW1lOiAiTm90aGluZyBQSE9ORSAoMSkiLCB2YWw6ICJwMSIgfSwgeyBuYW1lOiAiTm90aGluZyBQSE9ORSAoMikiLCB2YWw6ICJwMiIgfSwgeyBuYW1lOiAiTm90aGluZyBQSE9ORSAoMkEpIiwgdmFsOiAicDJhIiB9LCB7IG5hbWU6ICJOb3RoaW5nIFBIT05FICgyQSkgUExVUyIsIHZhbDogInAyYXBsdXMiIH0sIHsgbmFtZTogIk5vdGhpbmcgUEhPTkUgKDMpIiwgdmFsOiAicDMiIH0sIHsgbmFtZTogIk5vdGhpbmcgUEhPTkUgKDNBKSIsIHZhbDogInAzYSIgfSwgeyBuYW1lOiAiTm90aGluZyBQSE9ORSAoM0EpIFBSTyIsIHZhbDogInAzYXBybyIgfSwgeyBuYW1lOiAiTm90aGluZyBQSE9ORSAoM0EpIExJVEUiLCB2YWw6ICJwM2FsaXRlIiB9LCB7IG5hbWU6ICJDTUYgUEhPTkUgMSIsIHZhbDogImNtZjEiIH0sIHsgbmFtZTogIkNNRiBQSE9ORSAyIFBSTyIsIHZhbDogImNtZjJwcm8iIH0gXTsgb3BlblVuaXZlcnNhbFNlbGVjdG9yKCJDSE9PU0UgREVWSUNFIiwgZGV2aWNlcywgKHNlbGVjdGVkKSA9PiB7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzd1NlbGVjdCcpLnZhbHVlID0gc2VsZWN0ZWQudmFsOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGV2aWNlVHJpZ2dlclRleHQnKS5pbm5lclRleHQgPSBzZWxlY3RlZC5uYW1lOyBzaG93TG9ncygpOyB9KTsgfSBmdW5jdGlvbiBvcGVuU3RhdGVNZW51KCkgeyBjb25zdCBzdGF0ZXMgPSBbIkFOREhSQSBQUkFERVNIIiwgIkFTU0FNIiwgIkJJSEFSIiwgIkNIQU5ESUdBUkgiLCAiQ0hIQVRUSVNHQVJIIiwgIkRFTEhJIiwgIkdPQSIsICJHVUpBUkFUIiwgIkhBUllBTkEiLCAiSElNQUNIQUwgUFJBREVTSCIsICJKQU1NVSAmIEtBU0hNSVIiLCAiSkhBUktIQU5EIiwgIktBUk5BVEFLQSIsICJLRVJBTEEiLCAiTUFESFlBIFBSQURFU0giLCAiTUFIQVJBU0hUUkEiLCAiTUVHSEFMQVlBIiwgIk5BR0FMQU5EIiwgIk9ESVNIQSIsICJQVURVQ0hFUlJZIiwgIlBVTkpBQiIsICJSQUpBU1RIQU4iLCAiVEFNSUwgTkFEVSIsICJURUxBTkdBTkEiLCAiVFJJUFVSQSIsICJVVFRBUiBQUkFERVNIIiwgIlVUVEFSQUtIQU5EIiwgIldFU1QgQkVOR0FMIl0ubWFwKHMgPT4gKHsgbmFtZTogcywgdmFsOiBzIH0pKTsgb3BlblVuaXZlcnNhbFNlbGVjdG9yKCJTRUxFQ1QgU1RBVEUiLCBzdGF0ZXMsIChzZWxlY3RlZCkgPT4geyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhdGUnKS52YWx1ZSA9IHNlbGVjdGVkLnZhbDsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXRlVHJpZ2dlclRleHQnKS5pbm5lclRleHQgPSBzZWxlY3RlZC5uYW1lOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2l0eScpLnZhbHVlID0gIiI7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaXR5VHJpZ2dlclRleHQnKS5pbm5lclRleHQgPSAiU0VMRUNUIENJVFkiOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2NJbmZvJykuaW5uZXJIVE1MID0gIiI7IGxvYWRDaXRpZXNDdXN0b20oKTsgfSk7IH0gZnVuY3Rpb24gb3BlbkNpdHlNZW51KCkgeyBjb25zdCBzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXRlJykudmFsdWU7IGlmKCFzIHx8ICFTRVJWSUNFX0RCW3NdKSByZXR1cm47IGNvbnN0IHJhd0NpdGllcyA9IFsuLi5uZXcgU2V0KE9iamVjdC5rZXlzKFNFUlZJQ0VfREJbc10pLm1hcChjID0+IGMuc3BsaXQoJ18nKVswXSkpXS5zb3J0KCk7IGNvbnN0IGNpdHlMaXN0ID0gcmF3Q2l0aWVzLm1hcChjID0+ICh7IG5hbWU6IGMsIHZhbDogYyB9KSk7IG9wZW5Vbml2ZXJzYWxTZWxlY3RvcigiU0VMRUNUIENJVFkiLCBjaXR5TGlzdCwgKHNlbGVjdGVkKSA9PiB7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaXR5JykudmFsdWUgPSBzZWxlY3RlZC52YWw7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaXR5VHJpZ2dlclRleHQnKS5pbm5lclRleHQgPSBzZWxlY3RlZC5uYW1lOyBzaG93RGV0YWlscygpOyB9KTsgfSBmdW5jdGlvbiBsb2FkQ2l0aWVzQ3VzdG9tKCkgeyBjb25zdCBzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXRlJykudmFsdWU7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaXR5R3JvdXAnKS5zdHlsZS5kaXNwbGF5ID0gKCFzIHx8ICFTRVJWSUNFX0RCW3NdKSA/ICdub25lJyA6ICdibG9jayc7IH0gZnVuY3Rpb24gb3BlblVuaXZlcnNhbFNlbGVjdG9yKHRpdGxlLCBpdGVtcywgY2FsbGJhY2spIHsgY29uc3QgdGl0bGVFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWxlY3RvclRpdGxlJyk7IGNvbnN0IGxpc3RFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWxlY3Rvckxpc3QnKTsgdGl0bGVFbC5pbm5lclRleHQgPSB0aXRsZTsgbGlzdEVsLmlubmVySFRNTCA9ICIiOyBpdGVtcy5mb3JFYWNoKGl0ZW0gPT4geyBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsgZGl2LmNsYXNzTmFtZSA9ICJzZWxlY3Rvci1pdGVtIjsgZGl2LmlubmVySFRNTCA9IGA8c3Bhbj4ke2l0ZW0ubmFtZX08L3NwYW4+IDxpIGNsYXNzPSJmYS1zb2xpZCBmYS1hcnJvdy1yaWdodCIgc3R5bGU9ImZvbnQtc2l6ZTowLjhyZW07IG9wYWNpdHk6MC41OyI+PC9pPmA7IGRpdi5vbmNsaWNrID0gKCkgPT4geyBpZihuYXZpZ2F0b3IudmlicmF0ZSkgbmF2aWdhdG9yLnZpYnJhdGUoMzApOyBjYWxsYmFjayhpdGVtKTsgY2xvc2VTY3JlZW4oJ3NlbGVjdG9yU2NyJyk7IH07IGxpc3RFbC5hcHBlbmRDaGlsZChkaXYpOyB9KTsgb3BlblNjcmVlbignc2VsZWN0b3JTY3InKTsgfSBhc3luYyBmdW5jdGlvbiBydW5Eb3dubG9hZChidG4sIGlucHV0KSB7IGNvbnN0IGJhciA9IGJ0bi5xdWVyeVNlbGVjdG9yKCcucHJvZ3Jlc3MtYmFyJyk7IGNvbnN0IHR4dCA9IGJ0bi5xdWVyeVNlbGVjdG9yKCcuYnRuLXRleHQnKTsgY29uc3Qgb2xkVHh0ID0gdHh0LmlubmVyVGV4dDsgbGV0IGZpbmFsVXJsID0gIiI7IGlmIChpbnB1dCA9PT0gJ0JFVEFfVE9PTCcpIGZpbmFsVXJsID0gQ09ORklHLkJFVEFfVE9PTF9VUkw7IGVsc2UgaWYgKGlucHV0ID09PSAnT1RBX1pJUCcpIHsgY29uc3QgZGV2aWNlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N3U2VsZWN0JykudmFsdWU7IGlmKCFkZXZpY2UpIHsgYWxlcnQoIlBMRUFTRSBTRUxFQ1QgQSBERVZJQ0UhIik7IHJldHVybjsgfSBmaW5hbFVybCA9IENPTkZJRy5TT0ZUV0FSRVtkZXZpY2VdPy51cmw7IH0gZWxzZSBmaW5hbFVybCA9IGlucHV0OyBpZiAoIWZpbmFsVXJsIHx8IGZpbmFsVXJsID09PSAiIyIpIHsgYWxlcnQoIkxJTksgTk9UIEZPVU5EISIpOyByZXR1cm47IH0gYnRuLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnbm9uZSc7IHR4dC5pbm5lclRleHQgPSAnUFJPQ0VTU0lORy4uLic7IGJhci5zdHlsZS50cmFuc2l0aW9uID0gJ3dpZHRoIDEuNXMgbGluZWFyJzsgYmFyLnN0eWxlLndpZHRoID0gJzEwMCUnOyBjb25zdCBpc1ppcCA9IGZpbmFsVXJsLnRvTG93ZXJDYXNlKCkuZW5kc1dpdGgoJy56aXAnKSB8fCBmaW5hbFVybC50b0xvd2VyQ2FzZSgpLmVuZHNXaXRoKCcuYXBrJyk7IGlmIChpc1ppcCkgeyBzZXRUaW1lb3V0KCgpID0+IHsgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsgbGluay5ocmVmID0gZmluYWxVcmw7IGxpbmsudGFyZ2V0ID0gIl9ibGFuayI7IGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobGluayk7IGxpbmsuY2xpY2soKTsgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChsaW5rKTsgZmluaXNoRG93bmxvYWQoYnRuLCB0eHQsIGJhciwgb2xkVHh0KTsgfSwgMTAwMCk7IH0gZWxzZSB7IHRyeSB7IGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goZmluYWxVcmwpOyBjb25zdCBibG9iID0gYXdhaXQgcmVzcG9uc2UuYmxvYigpOyBjb25zdCBibG9iVXJsID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7IGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7IGxpbmsuaHJlZiA9IGJsb2JVcmw7IGxpbmsuZG93bmxvYWQgPSAiTm90aGluZ1NwYWNlXyIgKyBEYXRlLm5vdygpICsgIi5wbmciOyBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGxpbmspOyBsaW5rLmNsaWNrKCk7IGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobGluayk7IHdpbmRvdy5VUkwucmV2b2tlT2JqZWN0VVJMKGJsb2JVcmwpOyBmaW5pc2hEb3dubG9hZChidG4sIHR4dCwgYmFyLCBvbGRUeHQpOyB9IGNhdGNoIChlcnIpIHsgd2luZG93Lm9wZW4oZmluYWxVcmwsICdfYmxhbmsnKTsgZmluaXNoRG93bmxvYWQoYnRuLCB0eHQsIGJhciwgb2xkVHh0KTsgfSB9IH0gZnVuY3Rpb24gZmluaXNoRG93bmxvYWQoYnRuLCB0eHQsIGJhciwgb2xkVHh0KSB7IHR4dC5pbm5lclRleHQgPSAiRE9ORSDinJMiOyBzZXRUaW1lb3V0KCgpID0+IHsgYmFyLnN0eWxlLnRyYW5zaXRpb24gPSAnbm9uZSc7IGJhci5zdHlsZS53aWR0aCA9ICcwJSc7IHR4dC5pbm5lclRleHQgPSBvbGRUeHQ7IGJ0bi5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ2FsbCc7IH0sIDEwMDApOyB9IGFzeW5jIGZ1bmN0aW9uIGluaXRTb2Z0d2FyZURhdGEoKSB7IHRyeSB7IGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goImh0dHBzOiBmdW5jdGlvbiBzaG93TG9ncygpIHsgY29uc3QgbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzd1NlbGVjdCcpLnZhbHVlOyBjb25zdCBib3ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9nQm94JyksIGRpc3AgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3dEaXNwbGF5Jyk7IGlmKCFtIHx8ICFDT05GSUcuU09GVFdBUkVbbV0pIHsgYm94LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IGRpc3Auc3R5bGUuZGlzcGxheSA9ICdub25lJzsgcmV0dXJuOyB9IGNvbnN0IGRhdGEgPSBDT05GSUcuU09GVFdBUkVbbV07IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzd1Bob25lSW1nJykuc3JjID0gZGF0YS5pbWc7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzd1Bob25lVGl0bGUnKS5pbm5lclRleHQgPSBkYXRhLmRpc3A7IGRpc3Auc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N3TGlzdCcpLmlubmVySFRNTCA9IChkYXRhLmxvZ3MgJiYgQXJyYXkuaXNBcnJheShkYXRhLmxvZ3MpKSA/IGRhdGEubG9ncy5tYXAobCA9PiBgPGxpPiR7bH08L2xpPmApLmpvaW4oJycpIDogIjxsaT5EZXRhaWxzIG5vdCBhdmFpbGFibGU8L2xpPiI7IGJveC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsgfSBmdW5jdGlvbiB0b2dnbGVBY2NvcmRpb24oKSB7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhY2NDb250ZW50JykuY2xhc3NMaXN0LnRvZ2dsZSgnb3BlbicpOyB9IGFzeW5jIGZ1bmN0aW9uIGluaXRTZXJ2aWNlRGF0YSgpIHsgdHJ5IHsgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgiaHR0cHM6IGZ1bmN0aW9uIHNob3dEZXRhaWxzKCkgeyBjb25zdCBzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXRlJykudmFsdWUsIGMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2l0eScpLnZhbHVlLCBzY0luZm8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2NJbmZvJyk7IGlmKCFjIHx8ICFTRVJWSUNFX0RCW3NdKSByZXR1cm47IHNjSW5mby5pbm5lckhUTUwgPSAnJzsgT2JqZWN0LmtleXMoU0VSVklDRV9EQltzXSkuZmlsdGVyKGtleSA9PiBrZXkgPT09IGMgfHwga2V5LnN0YXJ0c1dpdGgoYyArICJfIikpLmZvckVhY2goa2V5ID0+IHsgY29uc3QgZCA9IFNFUlZJQ0VfREJbc11ba2V5XTsgc2NJbmZvLmlubmVySFRNTCArPSBgPGRpdiBjbGFzcz0iZGV0YWlsLWNhcmQiPjxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjttYXJnaW4tYm90dG9tOjEwcHg7Ij48aDMgc3R5bGU9ImZvbnQtc2l6ZToxLjRyZW07Ij4ke2Qubn08L2gzPjxzcGFuIGNsYXNzPSJzYy1iYWRnZSI+SUQ6ICR7ZC5jfTwvc3Bhbj48L2Rpdj48cCBzdHlsZT0idGV4dC10cmFuc2Zvcm06bm9uZTtvcGFjaXR5OjAuNztmb250LXNpemU6MXJlbTttYXJnaW4tYm90dG9tOjE1cHg7Ij48c3BhbiBzdHlsZT0iZm9udC1zaXplOjEuMnJlbTsiPiR7ZC5hfTwvcD48ZGl2IHN0eWxlPSJmb250LXNpemU6MC45cmVtO21hcmdpbi1ib3R0b206MTVweDsiPjxwPvCflZIgVElNRTogJHtkLnR9PC9wPjxwPvCfmqsgT0ZGIDogJHtkLm99PC9wPjwvZGl2PjxkaXYgY2xhc3M9ImNhcmQtcm93Ij48YnV0dG9uIGNsYXNzPSJidG4iIHN0eWxlPSJmbGV4OjE7cGFkZGluZzoxMnB4OyIgb25jbGljaz0id2luZG93Lm9wZW4oJ3RlbDoke2QucH0nKSI+Q0FMTDwvYnV0dG9uPjxidXR0b24gY2xhc3M9ImJ0biIgc3R5bGU9ImZsZXg6MTtwYWRkaW5nOjEycHg7IiBvbmNsaWNrPSJ3aW5kb3cub3BlbignJHtkLm19JykiPk1BUFM8L2J1dHRvbj48L2Rpdj48L2Rpdj5gOyB9KTsgfSBsZXQgc3dfdGltZXI7IGZ1bmN0aW9uIHN0YXJ0U29mdHdhcmVMb2dpYygpIHsgc3dfdGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHsgaWYobmF2aWdhdG9yLnZpYnJhdGUpIG5hdmlnYXRvci52aWJyYXRlKDUwKTsgb3BlblNvZnR3YXJlTWVudSgpOyB9LCA1MDApOyB9IGZ1bmN0aW9uIGNhbmNlbFNvZnR3YXJlTG9naWMoKSB7IGNsZWFyVGltZW91dChzd190aW1lcik7IH0gYXN5bmMgZnVuY3Rpb24gb3BlblNvZnR3YXJlTWVudSgpIHsgaWYodXNlclVVSUQgIT09IEFETUlOX1VVSUQpIHJldHVybjsgY29uc3QgaWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3dTZWxlY3QnKS52YWx1ZTsgY29uc3QgcGFzcyA9IHByb21wdCgi8J+UkCBTT0ZUV0FSRSBBRE1JTiBQQVNTV09SRDoiKTsgaWYoc3RyaW5nVG9IYXNoKHBhc3MpID09PSAiMTU0MDIxODQwMSIpIHsgaWYoIWlkKSB7IGlmKGNvbmZpcm0oIvCfhpUgQUREIE5FVyBERVZJQ0U/IikpIHsgY29uc3QgbmV3SWQgPSBwcm9tcHQoIlVuaXF1ZSBJRDoiKTsgaWYoIW5ld0lkKSByZXR1cm47IGNvbnN0IHBheWxvYWQgPSB7IGRpc3A6IHByb21wdCgiTmFtZToiKSwgaW1nOiBwcm9tcHQoIkltZyBVUkw6IiksIHVybDogcHJvbXB0KCJaaXAgTGluazoiKSwgbG9nczogW3Byb21wdCgiTm90ZToiKV0gfTsgYXdhaXQgZmV0Y2goYGh0dHBzOiBjb25zdCBjdXIgPSBDT05GSUcuU09GVFdBUkVbaWRdOyBjb25zdCBjaG9pY2UgPSBwcm9tcHQoYEVESVQgJHtjdXIuZGlzcH06XG4xLkxJTktcbjIuTkFNRVxuMy5JTUdcbjQuTk9URWApOyBsZXQgbG9hZCA9IHt9OyBpZihjaG9pY2U9PT0iMSIpIGxvYWQ9e3VybDpwcm9tcHQoIlVSTDoiLCAiIil9OyBpZihjaG9pY2U9PT0iMiIpIGxvYWQ9e2Rpc3A6cHJvbXB0KCJOQU1FOiIsICIiKX07IGlmKGNob2ljZT09PSIzIikgbG9hZD17aW1nOnByb21wdCgiSU1HOiIsICIiKX07IGlmKGNob2ljZT09PSI0IikgeyBjb25zdCByYXcgPSBwcm9tcHQoIk5PVEUgKHwgZm9yIG5ldyBsaW5lKToiLCAiIik7IGlmKHJhdykgbG9hZD17bG9nczogcmF3LnNwbGl0KCd8JykubWFwKHM9PnMudHJpbSgpKX07IH0gaWYoT2JqZWN0LmtleXMobG9hZCkubGVuZ3RoKSB7IGF3YWl0IGZldGNoKGBodHRwczogfSBlbHNlIHsgaWYocGFzcykgYWxlcnQoIldST05HIFBBU1NXT1JEIik7IH0gfSBsZXQgSFdfREFUQSA9IFtdOyBsZXQgY3VycmVudEltZ3MgPSBbXTsgbGV0IGN1cnJlbnRNb2RlbCA9ICIiOyBsZXQgaHdUaW1lciA9IG51bGw7IGxldCBpczNkID0gZmFsc2U7IGZ1bmN0aW9uIHZpYnJhdGUobXMgPSAxNSkgeyBpZihuYXZpZ2F0b3IudmlicmF0ZSkgbmF2aWdhdG9yLnZpYnJhdGUobXMpOyB9IGFzeW5jIGZ1bmN0aW9uIGluaXRIYXJkd2FyZSgpIHsgY29uc3QgZ3JpZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdod0dyaWQnKTsgaWYoSFdfREFUQS5sZW5ndGggPiAwKSByZXR1cm47IGdyaWQuaW5uZXJIVE1MID0gIjxwIHN0eWxlPSdwYWRkaW5nOjIwcHg7IG9wYWNpdHk6MC41OyB0ZXh0LWFsaWduOmNlbnRlcjsnPkZFVENISU5HLi4uPC9wPiI7IHRyeSB7IGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKCJodHRwczogaWYoIXJlcy5vaykgdGhyb3cgbmV3IEVycm9yKCJIVFRQIEVycm9yIik7IEhXX0RBVEEgPSBhd2FpdCByZXMuanNvbigpOyByZW5kZXJIVygnYWxsJyk7IH0gY2F0Y2goZSkgeyBjb25zb2xlLmVycm9yKGUpOyBncmlkLmlubmVySFRNTCA9ICI8cCBzdHlsZT0nY29sb3I6dmFyKC0tYWNjZW50KTsgdGV4dC1hbGlnbjpjZW50ZXI7IHBhZGRpbmc6MjBweDsnPkZBSUxFRCBUTyBMT0FELjxicj5DSEVDSyBJTlRFUk5FVC48L3A+IjsgfSB9IGZ1bmN0aW9uIHJlbmRlckhXKGNhdCkgeyBjb25zdCBncmlkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2h3R3JpZCcpOyBncmlkLmlubmVySFRNTCA9ICIiOyBjb25zdCBmaWx0ZXJlZCA9IEhXX0RBVEEuZmlsdGVyKHAgPT4gY2F0ID09PSAnYWxsJyB8fCBwLmNhdGVnb3J5ID09PSBjYXQpOyBpZihmaWx0ZXJlZC5sZW5ndGggPT09IDApIHsgZ3JpZC5pbm5lckhUTUwgPSAiPHAgc3R5bGU9J3BhZGRpbmc6MjBweDsgb3BhY2l0eTowLjU7IGdyaWQtY29sdW1uOnNwYW4gMjsgdGV4dC1hbGlnbjpjZW50ZXI7Jz5OTyBJVEVNUyBGT1VORDwvcD4iOyByZXR1cm47IH0gZmlsdGVyZWQuZm9yRWFjaChwID0+IHsgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7IGRpdi5jbGFzc05hbWUgPSAnaHctY2FyZCc7IGxldCB0aHVtYiA9ICIiOyBpZiAocC52YXJpYW50cyAmJiBwLnZhcmlhbnRzWzBdKSB0aHVtYiA9IHAudmFyaWFudHNbMF0uaW1nc1swXTsgZWxzZSBpZiAocC5pbWdzKSB0aHVtYiA9IHAuaW1nc1swXTsgZGl2LmlubmVySFRNTCA9IGA8aW1nIHNyYz0iJHt0aHVtYn0iPjxoMz4ke3AubmFtZX08L2gzPmA7IGRpdi5vbmNsaWNrID0gKCkgPT4geyB2aWJyYXRlKDIwKTsgb3BlblByb2R1Y3QocCk7IH07IGdyaWQuYXBwZW5kQ2hpbGQoZGl2KTsgfSk7IH0gZnVuY3Rpb24gZmlsdGVySFcoY2F0LCBlbCkgeyB2aWJyYXRlKDEwKTsgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmh3LXBpbGwnKS5mb3JFYWNoKHAgPT4gcC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKSk7IGVsLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpOyByZW5kZXJIVyhjYXQpOyB9IGZ1bmN0aW9uIG9wZW5Qcm9kdWN0KHApIHsgZXhpdDNkKCk7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkVGl0bGUnKS5pbm5lclRleHQgPSBwLm5hbWU7IGNvbnN0IGNCb3ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29sb3JQaWNrZXInKTsgY0JveC5pbm5lckhUTUwgPSAiIjsgaWYgKHAudmFyaWFudHMgJiYgcC52YXJpYW50cy5sZW5ndGggPiAwKSB7IHAudmFyaWFudHMuZm9yRWFjaCgodiwgaWR4KSA9PiB7IGNvbnN0IGRvdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOyBkb3QuY2xhc3NOYW1lID0gYGNvbG9yLWRvdCAke2lkeCA9PT0gMCA/ICdhY3RpdmUnIDogJyd9YDsgZG90LnN0eWxlLmJhY2tncm91bmQgPSB2LmNvbG9yQ29kZTsgZG90Lm9uY2xpY2sgPSAoKSA9PiB7IHZpYnJhdGUoMTApOyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY29sb3ItZG90JykuZm9yRWFjaChkID0+IGQuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJykpOyBkb3QuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7IGxvYWRWYXJpYW50KHYpOyB9OyBjQm94LmFwcGVuZENoaWxkKGRvdCk7IH0pOyBsb2FkVmFyaWFudChwLnZhcmlhbnRzWzBdKTsgfSBlbHNlIHsgbG9hZFZhcmlhbnQoeyBpbWdzOiBwLmltZ3MsIG1vZGVsM2Q6IHAubW9kZWwzZCB9KTsgfSBjb25zdCBzQm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RTcGVjcycpOyBzQm94LmlubmVySFRNTCA9ICIiOyBpZihwLnNwZWNzKSB7IE9iamVjdC5lbnRyaWVzKHAuc3BlY3MpLmZvckVhY2goKFtrLCB2XSkgPT4geyBzQm94LmlubmVySFRNTCArPSBgPGRpdiBjbGFzcz0icm93Ij48c3Bhbj4ke2t9PC9zcGFuPjxzcGFuPiR7dn08L3NwYW4+PC9kaXY+YDsgfSk7IH0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J1eUxpbmsnKS5ocmVmID0gcC5saW5rIHx8ICIjIjsgY29uc3QgcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdod0RldGFpbFNjcicpOyBzLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7IHNldFRpbWVvdXQoKCkgPT4gcy5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKSwgMTApOyB9IGZ1bmN0aW9uIGxvYWRWYXJpYW50KHYpIHsgY3VycmVudEltZ3MgPSB2LmltZ3MgfHwgW107IGN1cnJlbnRNb2RlbCA9IHYubW9kZWwzZCB8fCAiIjsgY29uc3QgdHJhY2sgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2xpZGVyVHJhY2snKTsgdHJhY2suaW5uZXJIVE1MID0gY3VycmVudEltZ3MubWFwKHNyYyA9PiBgPGRpdiBjbGFzcz0ic2xpZGUiPjxpbWcgc3JjPSIke3NyY30iPjwvZGl2PmApLmpvaW4oJycpOyB0cmFjay5zY3JvbGxMZWZ0ID0gMDsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ltZ0JhZGdlJykuaW5uZXJUZXh0ID0gYDEvJHtjdXJyZW50SW1ncy5sZW5ndGh9YDsgY29uc3Qgc2hvd0Fycm93cyA9IGN1cnJlbnRJbWdzLmxlbmd0aCA+IDEgPyAnZmxleCcgOiAnbm9uZSc7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG5QcmV2Jykuc3R5bGUuZGlzcGxheSA9IHNob3dBcnJvd3M7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG5OZXh0Jykuc3R5bGUuZGlzcGxheSA9IHNob3dBcnJvd3M7IH0gZnVuY3Rpb24gc2xpZGUoZGlyKSB7IHZpYnJhdGUoMTUpOyBjb25zdCB0cmFjayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzbGlkZXJUcmFjaycpOyB0cmFjay5zY3JvbGxCeSh7IGxlZnQ6IGRpciAqIHRyYWNrLmNsaWVudFdpZHRoLCBiZWhhdmlvcjogJ3Ntb290aCcgfSk7IH0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NsaWRlclRyYWNrJykuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgKGUpID0+IHsgY29uc3QgdHJhY2sgPSBlLnRhcmdldDsgY29uc3QgaWR4ID0gTWF0aC5yb3VuZCh0cmFjay5zY3JvbGxMZWZ0IC8gdHJhY2suY2xpZW50V2lkdGgpOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW1nQmFkZ2UnKS5pbm5lclRleHQgPSBgJHtpZHggKyAxfS8ke2N1cnJlbnRJbWdzLmxlbmd0aH1gOyB9KTsgY29uc3QgYm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZCb3gnKTsgbGV0IHRvdWNoU3RhcnRYID0gMDsgYm94LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCAoZSkgPT4geyBpZihpczNkKSByZXR1cm47IHRvdWNoU3RhcnRYID0gZS50b3VjaGVzWzBdLmNsaWVudFg7IGhvbGRTdGFydCgpOyB9LCB7cGFzc2l2ZTogdHJ1ZX0pOyBib3guYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgKGUpID0+IHsgaWYoaXMzZCkgcmV0dXJuOyBpZihNYXRoLmFicyhlLnRvdWNoZXNbMF0uY2xpZW50WCAtIHRvdWNoU3RhcnRYKSA+IDEwKSBob2xkQ2FuY2VsKCk7IH0sIHtwYXNzaXZlOiB0cnVlfSk7IGJveC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIGhvbGRDYW5jZWwpOyBib3guYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgaG9sZFN0YXJ0KTsgYm94LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBob2xkQ2FuY2VsKTsgYm94LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCBob2xkQ2FuY2VsKTsgZnVuY3Rpb24gaG9sZFN0YXJ0KCkgeyBpZihpczNkIHx8ICFjdXJyZW50TW9kZWwpIHJldHVybjsgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJhcicpLnN0eWxlLndpZHRoID0gIjEwMCUiOyBod1RpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7IHZpYnJhdGUoNjApOyBjb25zdCBtdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtdicpOyBtdi5zcmMgPSBjdXJyZW50TW9kZWw7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsM2QnKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsgaXMzZCA9IHRydWU7IH0sIDYwMCk7IH0gZnVuY3Rpb24gaG9sZENhbmNlbCgpIHsgaWYoaHdUaW1lcikgY2xlYXJUaW1lb3V0KGh3VGltZXIpOyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYmFyJykuc3R5bGUud2lkdGggPSAiMCUiOyB9IGZ1bmN0aW9uIGV4aXQzZCgpIHsgdmlicmF0ZSgxMCk7IGlzM2QgPSBmYWxzZTsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2wzZCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IH0gbGV0IGN1cnJlbnRNb2RlID0gIiI7IGxldCBjdXJyZW50QmxvYlVybCA9ICIiOyBmdW5jdGlvbiB0b2dnbGVHZW5lcmF0b3IobW9kZSkgeyBjb25zdCB1aSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnZW5VSScpOyBjb25zdCBjYXJkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21haW5DYXJkJyk7IGlmIChjdXJyZW50TW9kZSA9PT0gbW9kZSAmJiB1aS5zdHlsZS5kaXNwbGF5ID09PSAnYmxvY2snKSB7IHVpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IGN1cnJlbnRNb2RlID0gIiI7IHJldHVybjsgfSBjdXJyZW50TW9kZSA9IG1vZGU7IHVpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOyBjYXJkLmNsYXNzTmFtZSA9IGBub3RoaW5nLWNhcmQgZG90dGVkLWJnIG1vZGUtJHttb2RlfWA7IGdlbmVyYXRlV2FsbCgpOyB9IGFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlV2FsbCgpIHsgY29uc3QgaW1nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dhbGxJbWcnKTsgY29uc3Qgc3RhdHVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXR1c1RleHQnKTsgY29uc3QgdyA9IGN1cnJlbnRNb2RlID09PSAnbW9iaWxlJyA/IDEwODAgOiAxOTIwOyBjb25zdCBoID0gY3VycmVudE1vZGUgPT09ICdtb2JpbGUnID8gMTkyMCA6IDEwODA7IGNvbnN0IHNlZWQgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwMDApOyBjb25zdCBoZFVybCA9IGBodHRwczogc3RhdHVzLmlubmVyVGV4dCA9ICJHRU7wn6qEIjsgaW1nLmNsYXNzTGlzdC5hZGQoJ2JsdXInKTsgdHJ5IHsgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChoZFVybCk7IGNvbnN0IGJsb2IgPSBhd2FpdCByZXNwb25zZS5ibG9iKCk7IGlmIChjdXJyZW50QmxvYlVybCkgeyBVUkwucmV2b2tlT2JqZWN0VVJMKGN1cnJlbnRCbG9iVXJsKTsgfSBjdXJyZW50QmxvYlVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7IGltZy5zcmMgPSBjdXJyZW50QmxvYlVybDsgaW1nLm9ubG9hZCA9ICgpID0+IHsgaW1nLmNsYXNzTGlzdC5yZW1vdmUoJ2JsdXInKTsgc3RhdHVzLmlubmVyVGV4dCA9IGBET05F4pyoYDsgfTsgfSBjYXRjaCAoZXJyb3IpIHsgY29uc29sZS5lcnJvcigiRmV0Y2ggZmFpbGVkIiwgZXJyb3IpOyBzdGF0dXMuaW5uZXJUZXh0ID0gIlNZU19FUlJPUiI7IH0gfSBmdW5jdGlvbiBkb3dubG9hZFdhbGwoKSB7IGlmKCFjdXJyZW50QmxvYlVybCkgcmV0dXJuOyBjb25zdCBidG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2F2ZS1waWxsJyk7IGJ0bi5pbm5lclRleHQgPSAiLi4uIjsgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsgYS5ocmVmID0gY3VycmVudEJsb2JVcmw7IGEuZG93bmxvYWQgPSBgTm90aGluZ1NwYWNlXyR7Y3VycmVudE1vZGV9XyR7RGF0ZS5ub3coKX0uanBnYDsgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKTsgYS5jbGljaygpOyBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGEpOyBzZXRUaW1lb3V0KCgpID0+IHsgYnRuLmlubmVyVGV4dCA9ICJTQVZFIjsgfSwgMTAwMCk7IH0gbGV0IGN1cnJlbnRBdWRpb0Jsb2JVcmwgPSBudWxsOyBhc3luYyBmdW5jdGlvbiBzZWFyY2hNdXNpYygpIHsgY29uc3QgcXVlcnkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbVF1ZXJ5JykudmFsdWU7IGNvbnN0IGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtU2VhcmNoQnRuJyk7IGNvbnN0IGNhcmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbXVzaWMtY2FyZCcpOyBpZiAoIXF1ZXJ5KSByZXR1cm47IGNvbnN0IG9yaWdpbmFsQnRuID0gYnRuLmlubmVySFRNTDsgYnRuLmlubmVySFRNTCA9ICc8aSBjbGFzcz0iZmEtc29saWQgZmEtc3Bpbm5lciBmYS1zcGluIj48L2k+JzsgdHJ5IHsgY29uc3QgXzB4MSA9ICJhSFIwY0hNNkx5OXBkSFZ1WlhNdVlYQndiR1V1WTI5dEwzTmxZWEpqYUQ5c2FXMXBkRDB5TlRBbVpXNTBhWFI1UFhOdmJtY21kR1Z5YlQwPSI7IGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAke2F0b2IoXzB4MSl9JHtlbmNvZGVVUklDb21wb25lbnQocXVlcnkpfWApOyBjb25zdCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTsgaWYgKGRhdGEucmVzdWx0cy5sZW5ndGggPiAwKSB7IGN1cnJlbnRQbGF5bGlzdCA9IGRhdGEucmVzdWx0cy5tYXAoc29uZyA9PiAoeyB1cmw6IHNvbmcucHJldmlld1VybCwgYXJ0OiBzb25nLmFydHdvcmtVcmwxMDAucmVwbGFjZSgnMTAweDEwMCcsICc0MDB4NDAwJyksIHRpdGxlOiBzb25nLnRyYWNrTmFtZS5yZXBsYWNlKC9temFmX1xkKy9nLCAiTm90aGluZyBUUkFDSyIpLnRvVXBwZXJDYXNlKCksIGFydGlzdDogc29uZy5hcnRpc3ROYW1lIH0pKTsgY3VycmVudEluZGV4ID0gMDsgY2FyZC5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsgbG9hZFNvbmcoMCk7IH0gZWxzZSB7IGFsZXJ0KCJOb3RoaW5nIEZPVU5EIik7IH0gfSBjYXRjaCAoZSkgeyBjb25zb2xlLmVycm9yKGUpOyB9IGZpbmFsbHkgeyBidG4uaW5uZXJIVE1MID0gb3JpZ2luYWxCdG47IH0gfSBhc3luYyBmdW5jdGlvbiBsb2FkU29uZyhpbmRleCkgeyBpZiAoIWN1cnJlbnRQbGF5bGlzdFtpbmRleF0pIHJldHVybjsgY29uc3Qgc29uZyA9IGN1cnJlbnRQbGF5bGlzdFtpbmRleF07IGNvbnN0IHBsYXllciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtUGxheWVyJyk7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtQXJ0Jykuc3JjID0gc29uZy5hcnQ7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtVGl0bGUnKS5pbm5lclRleHQgPSBzb25nLnRpdGxlOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbUFydGlzdCcpLmlubmVyVGV4dCA9IHNvbmcuYXJ0aXN0OyBsYXN0UGxheWVkQXJ0ID0gc29uZy5hcnQ7IGlmKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtaW5pLWFydCcpKSB7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtaW5pLWFydCcpLnNyYyA9IGxhc3RQbGF5ZWRBcnQ7IH0gaWYgKGN1cnJlbnRBdWRpb0Jsb2JVcmwpIHsgVVJMLnJldm9rZU9iamVjdFVSTChjdXJyZW50QXVkaW9CbG9iVXJsKTsgY3VycmVudEF1ZGlvQmxvYlVybCA9IG51bGw7IH0gdHJ5IHsgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChzb25nLnVybCk7IGNvbnN0IGJsb2IgPSBhd2FpdCByZXNwb25zZS5ibG9iKCk7IGN1cnJlbnRBdWRpb0Jsb2JVcmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOyBwbGF5ZXIuc3JjID0gY3VycmVudEF1ZGlvQmxvYlVybDsgcGxheWVyLmxvYWQoKTsgdG9nZ2xlUGxheSh0cnVlKTsgfSBjYXRjaCAoZXJyb3IpIHsgY29uc29sZS5lcnJvcigiQXVkaW8gYmxvY2sgaHVhIGZldGNoIGhvbmUgc2UsIGZhbGxiYWNrIGFjdGl2ZSIsIGVycm9yKTsgcGxheWVyLnNyYyA9IHNvbmcudXJsOyBwbGF5ZXIubG9hZCgpOyB0b2dnbGVQbGF5KHRydWUpOyB9IGlmICgnbWVkaWFTZXNzaW9uJyBpbiBuYXZpZ2F0b3IpIHsgbmF2aWdhdG9yLm1lZGlhU2Vzc2lvbi5tZXRhZGF0YSA9IG5ldyBNZWRpYU1ldGFkYXRhKHsgdGl0bGU6IHNvbmcudGl0bGUsIGFydGlzdDogc29uZy5hcnRpc3QsIGFsYnVtOiAiTm90aGluZyBTcGFjZSIsIGFydHdvcms6IFt7IHNyYzogc29uZy5hcnQsIHNpemVzOiAnNTEyeDUxMicsIHR5cGU6ICdpbWFnZS9qcGVnJyB9XSB9KTsgbmF2aWdhdG9yLm1lZGlhU2Vzc2lvbi5zZXRBY3Rpb25IYW5kbGVyKCdwbGF5JywgZnVuY3Rpb24oKSB7IHRvZ2dsZVBsYXkodHJ1ZSk7IH0pOyBuYXZpZ2F0b3IubWVkaWFTZXNzaW9uLnNldEFjdGlvbkhhbmRsZXIoJ3BhdXNlJywgZnVuY3Rpb24oKSB7IHRvZ2dsZVBsYXkoZmFsc2UpOyB9KTsgbmF2aWdhdG9yLm1lZGlhU2Vzc2lvbi5zZXRBY3Rpb25IYW5kbGVyKCdwcmV2aW91c3RyYWNrJywgcHJldlNvbmcpOyBuYXZpZ2F0b3IubWVkaWFTZXNzaW9uLnNldEFjdGlvbkhhbmRsZXIoJ25leHR0cmFjaycsIG5leHRTb25nKTsgfSB9IGZ1bmN0aW9uIHRvZ2dsZVBsYXkoZm9yY2VQbGF5ID0gZmFsc2UpIHsgY29uc3QgcGxheWVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21QbGF5ZXInKTsgY29uc3QgaWNvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwbGF5LXBhdXNlIGknKTsgY29uc3QgYXJ0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21BcnQnKTsgaWYgKHBsYXllci5wYXVzZWQgfHwgZm9yY2VQbGF5KSB7IHBsYXllci5wbGF5KCkuY2F0Y2goKCk9Pnt9KTsgaWNvbi5jbGFzc05hbWUgPSAiZmEtc29saWQgZmEtY2lyY2xlLXBhdXNlIjsgYXJ0LmNsYXNzTGlzdC5hZGQoJ3NwaW5uaW5nJyk7IGlmKCdtZWRpYVNlc3Npb24nIGluIG5hdmlnYXRvcikgbmF2aWdhdG9yLm1lZGlhU2Vzc2lvbi5wbGF5YmFja1N0YXRlID0gInBsYXlpbmciOyB9IGVsc2UgeyBwbGF5ZXIucGF1c2UoKTsgaWNvbi5jbGFzc05hbWUgPSAiZmEtc29saWQgZmEtY2lyY2xlLXBsYXkiOyBhcnQuY2xhc3NMaXN0LnJlbW92ZSgnc3Bpbm5pbmcnKTsgaWYoJ21lZGlhU2Vzc2lvbicgaW4gbmF2aWdhdG9yKSBuYXZpZ2F0b3IubWVkaWFTZXNzaW9uLnBsYXliYWNrU3RhdGUgPSAicGF1c2VkIjsgfSB9IGZ1bmN0aW9uIG5leHRTb25nKCkgeyBpZihjdXJyZW50UGxheWxpc3QubGVuZ3RoKSB7IGN1cnJlbnRJbmRleCA9IChjdXJyZW50SW5kZXggKyAxKSAlIGN1cnJlbnRQbGF5bGlzdC5sZW5ndGg7IGxvYWRTb25nKGN1cnJlbnRJbmRleCk7IH0gfSBmdW5jdGlvbiBwcmV2U29uZygpIHsgaWYoY3VycmVudFBsYXlsaXN0Lmxlbmd0aCkgeyBjdXJyZW50SW5kZXggPSAoY3VycmVudEluZGV4IC0gMSArIGN1cnJlbnRQbGF5bGlzdC5sZW5ndGgpICUgY3VycmVudFBsYXlsaXN0Lmxlbmd0aDsgbG9hZFNvbmcoY3VycmVudEluZGV4KTsgfSB9IGZ1bmN0aW9uIGhhbmRsZU11c2ljQ2xvc2UoKSB7IGNsb3NlU2NyZWVuKCdtdXNpY1NjcicpOyBpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtUGxheWVyJykucGF1c2VkKSB7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtaW5pLXBsYXllcicpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWluaS1hcnQnKS5zcmMgPSBsYXN0UGxheWVkQXJ0OyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWluaS1hcnQnKS5jbGFzc0xpc3QuYWRkKCdzcGlubmluZycpOyB9IH0gZnVuY3Rpb24gcmVzdG9yZVBsYXllcigpIHsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21pbmktcGxheWVyJykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsgb3BlblNjcmVlbignbXVzaWNTY3InKTsgfSBhc3luYyBmdW5jdGlvbiBkb3dubG9hZEN1cnJlbnRTb25nKCkgeyBjb25zdCBzb25nID0gY3VycmVudFBsYXlsaXN0W2N1cnJlbnRJbmRleF07IGNvbnN0IGJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtdXNpYy1jYXJkIC5idG4nKTsgaWYoIXNvbmcpIHJldHVybjsgYnRuLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAibm9uZSI7IGJ0bi5pbm5lclRleHQgPSAiU0FWSU5HLi4uIjsgdHJ5IHsgbGV0IGRvd25sb2FkTGluayA9IGN1cnJlbnRBdWRpb0Jsb2JVcmw7IGlmKCFkb3dubG9hZExpbmspIHsgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChzb25nLnVybCk7IGNvbnN0IGJsb2IgPSBhd2FpdCByZXNwb25zZS5ibG9iKCk7IGRvd25sb2FkTGluayA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOyB9IGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7IGEuaHJlZiA9IGRvd25sb2FkTGluazsgYS5kb3dubG9hZCA9IGAke3NvbmcudGl0bGUucmVwbGFjZSgvW15hLXpBLVowLTlcc10vZywgJycpLnRyaW0oKX0gLSBOb3RoaW5nU3BhY2UubXAzYDsgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKTsgYS5jbGljaygpOyBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGEpOyBpZighY3VycmVudEF1ZGlvQmxvYlVybCkgd2luZG93LlVSTC5yZXZva2VPYmplY3RVUkwoZG93bmxvYWRMaW5rKTsgYnRuLmlubmVyVGV4dCA9ICJET05FIOKckyI7IH0gY2F0Y2ggKGUpIHsgd2luZG93Lm9wZW4oc29uZy51cmwsICdfYmxhbmsnKTsgYnRuLmlubmVyVGV4dCA9ICJPUEVORUQiOyB9IHNldFRpbWVvdXQoKCkgPT4geyBidG4uaW5uZXJUZXh0ID0gIkRPV05MT0FEIjsgYnRuLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAiYWxsIjsgfSwgMjAwMCk7IH0gY29uc3QgUFJKX0dIX1UgPSAibm90aGluZ2NvbW11bml0eSI7IGNvbnN0IFBSSl9HSF9SID0gIlRlc3RpbmciOyBjb25zdCBQUkpfR0hfREIgPSAicHJvamVjdHMuanNvbiI7IGNvbnN0IFBSSl9UMSA9ICJnaHBfRFZmdXpUQzAxV2cwIjsgY29uc3QgUFJKX1QyID0gIlg0angyUzdteTdzVE1SV0ZPZTJ5M0xzbiI7IGNvbnN0IFBSSl9UT0tFTiA9IFBSSl9UMSArIFBSSl9UMjsgbGV0IHByalN0b3JlID0geyBhdmF0YXI6IG51bGwsIGltZzE6IG51bGwsIGltZzI6IG51bGwsIGltZzM6IG51bGwgfTsgYXN5bmMgZnVuY3Rpb24gZ2V0UHJqREIoKSB7IGNvbnN0IHVybCA9IGBodHRwczogdHJ5IHsgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godXJsICsgYD90PSR7RGF0ZS5ub3coKX1gLCB7IGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiBgdG9rZW4gJHtQUkpfVE9LRU59YCB9IH0pOyBpZiAocmVzLm9rKSB7IGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpOyBjb25zdCBjb250ZW50ID0gZGVjb2RlVVJJQ29tcG9uZW50KGVzY2FwZShhdG9iKGpzb24uY29udGVudCkpKTsgcmV0dXJuIHsgc2hhOiBqc29uLnNoYSwgZGF0YTogSlNPTi5wYXJzZShjb250ZW50KSB9OyB9IH0gY2F0Y2goZSkgeyBjb25zb2xlLmVycm9yKCJEQiBFcnJvciIsIGUpOyB9IHJldHVybiB7IHNoYTogbnVsbCwgZGF0YTogW10gfTsgfSBhc3luYyBmdW5jdGlvbiBzYXZlUHJqREIoZGF0YSwgc2hhLCBtc2cpIHsgY29uc3QgdXJsID0gYGh0dHBzOiBjb25zdCBjb250ZW50ID0gYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoZGF0YSwgbnVsbCwgMikpKSk7IGF3YWl0IGZldGNoKHVybCwgeyBtZXRob2Q6ICdQVVQnLCBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogYHRva2VuICR7UFJKX1RPS0VOfWAsICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSwgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBtZXNzYWdlOiBtc2csIGNvbnRlbnQ6IGNvbnRlbnQsIHNoYTogc2hhIH0pIH0pOyB9IGFzeW5jIGZ1bmN0aW9uIHVwbG9hZFByakltZyhiYXNlNjQsIG5hbWVQcmVmaXgpIHsgaWYoIWJhc2U2NCkgcmV0dXJuIG51bGw7IGNvbnN0IGNvbnRlbnQgPSBiYXNlNjQuc3BsaXQoJywnKVsxXTsgY29uc3QgZmlsZW5hbWUgPSBgUFJKXyR7RGF0ZS5ub3coKX1fJHtuYW1lUHJlZml4fS5qcGdgOyBjb25zdCB1cmwgPSBgaHR0cHM6IHRyeSB7IGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHVybCwgeyBtZXRob2Q6ICdQVVQnLCBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogYHRva2VuICR7UFJKX1RPS0VOfWAsICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSwgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBtZXNzYWdlOiAiSW1nIFVwbG9hZCIsIGNvbnRlbnQ6IGNvbnRlbnQgfSkgfSk7IGlmKHJlcy5vaykgcmV0dXJuIGBodHRwczogfSBjYXRjaChlKSB7IGNvbnNvbGUuZXJyb3IoZSk7IH0gcmV0dXJuIG51bGw7IH0gZnVuY3Rpb24gb3BlblByb2plY3RTY3JlZW4oKSB7IGNvbnN0IHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvamVjdFNjcicpOyBpZihzKSB7IHMuc3R5bGUuZGlzcGxheSA9ICdmbGV4Jzsgc2V0VGltZW91dCgoKSA9PiBzLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpLCAxMCk7IGxvYWRQcmpGZWVkKCk7IH0gfSBmdW5jdGlvbiBzd2l0Y2hQcm9qZWN0VGFiKHRhYikgeyBjb25zdCBmZWVkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2plY3RGZWVkJyk7IGNvbnN0IGZvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvamVjdEZvcm0nKTsgY29uc3QgYjEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuRmVlZCcpOyBjb25zdCBiMiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG5VcGxvYWQnKTsgaWYodGFiID09PSAnZmVlZCcpIHsgaWYoYjEgJiYgYjEuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkgcmV0dXJuOyBmZWVkLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOyBmb3JtLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IGlmKGIxKSBiMS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsgaWYoYjIpIGIyLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpOyBsb2FkUHJqRmVlZCgpOyB9IGVsc2UgeyBmZWVkLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IGZvcm0uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7IGlmKGIyKSBiMi5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsgaWYoYjEpIGIxLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpOyB9IH0gZnVuY3Rpb24gaGFuZGxlUHJqRmlsZShpbnB1dCwgcHJ2SWQsIGtleSkgeyBpZiAoaW5wdXQuZmlsZXMgJiYgaW5wdXQuZmlsZXNbMF0pIHsgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKGUpIHsgcHJqU3RvcmVba2V5XSA9IGUudGFyZ2V0LnJlc3VsdDsgaWYoa2V5ID09PSAnYXZhdGFyJykgeyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGZwUHJ2Jykuc3JjID0gZS50YXJnZXQucmVzdWx0OyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGZwUHJ2Jykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwZnBJY29uJykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsgfSBlbHNlIHsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocHJ2SWQpLmlubmVySFRNTCA9IGA8aW1nIHNyYz0iJHtlLnRhcmdldC5yZXN1bHR9IiBzdHlsZT0id2lkdGg6MTAwJTsgaGVpZ2h0OjEwMCU7IG9iamVjdC1maXQ6Y292ZXI7IGJvcmRlci1yYWRpdXM6OHB4OyI+YDsgfSB9IHJlYWRlci5yZWFkQXNEYXRhVVJMKGlucHV0LmZpbGVzWzBdKTsgfSB9IGFzeW5jIGZ1bmN0aW9uIGxvYWRQcmpGZWVkKCkgeyBjb25zdCBmZWVkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2plY3RGZWVkJyk7IGNvbnN0IGNhY2hlZERhdGEgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncHJqX2NhY2hlJyk7IGlmIChjYWNoZWREYXRhKSB7IHJlbmRlclByb2plY3RzKEpTT04ucGFyc2UoY2FjaGVkRGF0YSkpOyB9IGVsc2UgeyBmZWVkLmlubmVySFRNTCA9ICI8cCBzdHlsZT0ndGV4dC1hbGlnbjpjZW50ZXI7IHBhZGRpbmc6MjBweDsgb3BhY2l0eTowLjU7Jz5GRVRDSElORyBQUk9KRUNUUy4uLjwvcD4iOyB9IHRyeSB7IGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGBodHRwczogaWYoIXJlcy5vaykgdGhyb3cgbmV3IEVycm9yKCk7IGxldCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTsgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Byal9jYWNoZScsIEpTT04uc3RyaW5naWZ5KGRhdGEpKTsgcmVuZGVyUHJvamVjdHMoZGF0YSk7IH0gY2F0Y2goZSkgeyBpZighY2FjaGVkRGF0YSkgZmVlZC5pbm5lckhUTUwgPSAiPHAgc3R5bGU9J3RleHQtYWxpZ246Y2VudGVyOyBvcGFjaXR5OjAuNTsnPkVSUk9SIExPQURJTkcgRkVFRDwvcD4iOyB9IH0gZnVuY3Rpb24gcmVuZGVyUHJvamVjdHMoZGF0YSkgeyBjb25zdCBmZWVkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2plY3RGZWVkJyk7IGlmKCFkYXRhIHx8IGRhdGEubGVuZ3RoID09PSAwKSB7IGZlZWQuaW5uZXJIVE1MID0gIjxwIHN0eWxlPSd0ZXh0LWFsaWduOmNlbnRlcjsgb3BhY2l0eTowLjU7Jz5OTyBQUk9KRUNUUyBZRVQ8L3A+IjsgcmV0dXJuOyB9IGZlZWQuaW5uZXJIVE1MID0gZGF0YS5yZXZlcnNlKCkubWFwKHAgPT4geyBjb25zdCBwZnAgPSBwLmF2YXRhciB8fCAiaHR0cHM6IGNvbnN0IHRpY2sgPSBwLnZlcmlmaWVkID8gYDxpIGNsYXNzPSJmYS1zb2xpZCBmYS1jaXJjbGUtY2hlY2siIHN0eWxlPSJjb2xvcjojM2I4MmY2OyBtYXJnaW4tbGVmdDo1cHg7Ij48L2k+YCA6IGBgOyBjb25zdCBpc01pbmUgPSAocC51dWlkID09PSB1c2VyVVVJRCk7IGNvbnN0IGlzQWRtaW4gPSAodHlwZW9mIEFETUlOX1VVSUQgIT09ICd1bmRlZmluZWQnICYmIHVzZXJVVUlEID09PSBBRE1JTl9VVUlEKTsgbGV0IGNvbnRyb2xzID0gIiI7IGlmIChpc01pbmUgfHwgaXNBZG1pbikgeyBjb250cm9scyArPSBgPGJ1dHRvbiBvbmNsaWNrPSJkZWxldGVQcm9qZWN0KCcke3AuaWR9JywgJyR7cC51dWlkfScpIiBzdHlsZT0iYmFja2dyb3VuZDpyZ2JhKDI1NSwwLDAsMC4xKTsgY29sb3I6I2ZmNDQ0NDsgYm9yZGVyOm5vbmU7IHBhZGRpbmc6NnB4IDEycHg7IGJvcmRlci1yYWRpdXM6NnB4OyBmb250LXNpemU6MC43NXJlbTsgY3Vyc29yOnBvaW50ZXI7Ij48aSBjbGFzcz0iZmEtc29saWQgZmEtdHJhc2giPjwvaT4gREVMRVRFPC9idXR0b24+YDsgfSBpZiAoaXNBZG1pbikgeyBjb250cm9scyArPSBgPGJ1dHRvbiBvbmNsaWNrPSJ0b2dnbGVWZXJpZnlQcm9qZWN0KCcke3AuaWR9JykiIHN0eWxlPSJiYWNrZ3JvdW5kOnJnYmEoMCwyMTgsMjU1LDAuMSk7IGNvbG9yOiMwMGRhZmY7IGJvcmRlcjpub25lOyBwYWRkaW5nOjZweCAxMnB4OyBib3JkZXItcmFkaXVzOjZweDsgZm9udC1zaXplOjAuNzVyZW07IGN1cnNvcjpwb2ludGVyOyBtYXJnaW4tbGVmdDo4cHg7Ij48aSBjbGFzcz0iZmEtc29saWQgZmEtc2hpZWxkLWNoZWNrIj48L2k+ICR7cC52ZXJpZmllZCA/ICdVTlZFUklGWScgOiAnVkVSSUZZJ308L2J1dHRvbj5gOyB9IGxldCBpbWdzID0gIiI7IGlmKHAuaW1hZ2VzICYmIHAuaW1hZ2VzLmxlbmd0aCA+IDApIHsgaW1ncyA9IGA8ZGl2IGNsYXNzPSJwLWltZ3MiIHN0eWxlPSJkaXNwbGF5OmZsZXg7IGdhcDo4cHg7IG92ZXJmbG93LXg6YXV0bzsgbWFyZ2luOjEycHggMDsgcGFkZGluZy1ib3R0b206NXB4OyI+ICR7cC5pbWFnZXMubWFwKHVybCA9PiBgPGltZyBzcmM9IiR7dXJsfSIgc3R5bGU9ImhlaWdodDoxMTBweDsgYm9yZGVyLXJhZGl1czoxMHB4OyBvYmplY3QtZml0OmNvdmVyOyBwb2ludGVyLWV2ZW50czpub25lOyI+YCkuam9pbignJyl9IDwvZGl2PmA7IH0gbGV0IGFjdGlvbkJ0biA9ICIiOyBpZiAocC5saW5rKSB7IGlmIChwLnZlcmlmaWVkKSB7IGFjdGlvbkJ0biA9IGA8YSBocmVmPSIke3AubGlua30iIHRhcmdldD0iX2JsYW5rIiBzdHlsZT0iY29sb3I6dmFyKC0tY2FyZCk7IHRleHQtZGVjb3JhdGlvbjpub25lOyBiYWNrZ3JvdW5kOnZhcigtLXRleHQpOyBwYWRkaW5nOjZweCAxNHB4OyBib3JkZXItcmFkaXVzOjIwcHg7IGZvbnQtc2l6ZTowLjhyZW07IGJvcmRlcjoxcHggc29saWQgIzMzMzsiPkdFVCBQUk9KRUNUPC9hPmA7IH0gZWxzZSB7IGFjdGlvbkJ0biA9IGA8c3BhbiBvbmNsaWNrPSJhbGVydCgn8J+UkiBQcm9qZWN0IGlzIHVuZGVyIHZlcmlmaWNhdGlvbiEgUGxlYXNlIHdhaXQgZm9yIEFkbWluIGFwcHJvdmFsLicpIiBzdHlsZT0iY3Vyc29yOnBvaW50ZXI7IG9wYWNpdHk6MC42OyBjb2xvcjp2YXIoLS1jYXJkKTsgYmFja2dyb3VuZDp2YXIoLS10ZXh0KTsgcGFkZGluZzo2cHggMTRweDsgYm9yZGVyLXJhZGl1czoyMHB4OyBmb250LXNpemU6MC44cmVtOyBib3JkZXI6MXB4IHNvbGlkICMzMzM7Ij5HRVQgUFJPSkVDVCDwn5SSPC9zcGFuPmA7IH0gfSByZXR1cm4gYCA8ZGl2IGNsYXNzPSJwcm9qZWN0LWNhcmQiIHN0eWxlPSJiYWNrZ3JvdW5kOnZhcigtLWNhcmQpOyBwYWRkaW5nOjE2cHg7IGJvcmRlci1yYWRpdXM6MThweDsgbWFyZ2luLWJvdHRvbToxNnB4OyBib3JkZXI6MXB4IHNvbGlkIHZhcigtLWJvcmRlcik7Ij4gPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4OyBhbGlnbi1pdGVtczpjZW50ZXI7IGdhcDoxMnB4OyBtYXJnaW4tYm90dG9tOjEycHg7Ij4gPGltZyBzcmM9IiR7cGZwfSIgc3R5bGU9IndpZHRoOjQycHg7IGhlaWdodDo0MnB4OyBib3JkZXItcmFkaXVzOjUwJTsgYm9yZGVyOjFweCBzb2xpZCB2YXIoLS1ib3JkZXIpOyBvYmplY3QtZml0OmNvdmVyOyI+IDxkaXY+IDxoMyBzdHlsZT0ibWFyZ2luOjA7IGZvbnQtc2l6ZToxLjM1cmVtOyBjb2xvcjp2YXIoLS10ZXh0KTsgbGV0dGVyLXNwYWNpbmc6MC40cHg7Ij4ke3AudGl0bGV9JHt0aWNrfSA8L2gzPiA8c3BhbiBzdHlsZT0iZm9udC1zaXplOjAuOHJlbTsgY29sb3I6Izc3NzsiPkRFViA6ICR7cC5hdXRob3J9PC9zcGFuPiA8L2Rpdj4gPC9kaXY+IDxwIHN0eWxlPSJjb2xvcjojYmJiOyBmb250LXNpemU6MC45cmVtOyBsaW5lLWhlaWdodDoxLjI7IG1hcmdpbjowOyI+JHtwLmRlc2N9PC9wPiAke2ltZ3N9IDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDsganVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47IGFsaWduLWl0ZW1zOmNlbnRlcjsgbWFyZ2luLXRvcDoxMHB4OyBib3JkZXItdG9wOjFweCBzb2xpZCB2YXIoLS1ib3JkZXIpOyBwYWRkaW5nLXRvcDoxMnB4OyI+ICR7YWN0aW9uQnRufSA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7Ij4ke2NvbnRyb2xzfTwvZGl2PiA8L2Rpdj4gPC9kaXY+YDsgfSkuam9pbignJyk7IH0gYXN5bmMgZnVuY3Rpb24gcHVzaFByb2plY3REYXRhKCkgeyBjb25zdCBhdXRob3IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJqQXV0aG9yJykudmFsdWU7IGNvbnN0IHRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByalRpdGxlJykudmFsdWU7IGNvbnN0IGRlc2MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJqRGVzYycpLnZhbHVlOyBjb25zdCBsaW5rID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByalVybCcpLnZhbHVlOyBjb25zdCBidG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJqUHVzaEJ0bicpOyBjb25zdCB0eHQgPSBidG4ucXVlcnlTZWxlY3RvcignLmJ0bi10ZXh0Jyk7IGNvbnN0IGJhciA9IGJ0bi5xdWVyeVNlbGVjdG9yKCcucHJvZ3Jlc3MtYmFyJyk7IGlmKCFhdXRob3IgfHwgIXRpdGxlIHx8ICFwcmpTdG9yZS5pbWcxKSB7IGFsZXJ0KCLimqDvuI8gTkFNRSwgVElUTEUgJiAxIElNQUdFIFJFUVVJUkVEISIpOyByZXR1cm47IH0gYnRuLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAibm9uZSI7IHR4dC5pbm5lclRleHQgPSAiVVBMT0FESU5HLi4uIjsgYmFyLnN0eWxlLndpZHRoID0gIjMwJSI7IHRyeSB7IGNvbnN0IHVBdiA9IGF3YWl0IHVwbG9hZFByakltZyhwcmpTdG9yZS5hdmF0YXIsICJwZnAiKTsgY29uc3QgdTEgPSBhd2FpdCB1cGxvYWRQcmpJbWcocHJqU3RvcmUuaW1nMSwgInMxIik7IGJhci5zdHlsZS53aWR0aCA9ICI2MCUiOyBjb25zdCB1MiA9IGF3YWl0IHVwbG9hZFByakltZyhwcmpTdG9yZS5pbWcyLCAiczIiKTsgY29uc3QgdTMgPSBhd2FpdCB1cGxvYWRQcmpJbWcocHJqU3RvcmUuaW1nMywgInMzIik7IGNvbnN0IHsgc2hhLCBkYXRhIH0gPSBhd2FpdCBnZXRQcmpEQigpOyBjb25zdCBuZXdQb3N0ID0geyBpZDogInByal8iICsgRGF0ZS5ub3coKSwgdXVpZDogdXNlclVVSUQsIHRpdGxlOiB0aXRsZS50b1VwcGVyQ2FzZSgpLCBhdXRob3I6IGF1dGhvci50b1VwcGVyQ2FzZSgpLCBhdmF0YXI6IHVBdiwgZGVzYzogZGVzYywgbGluazogbGluaywgaW1hZ2VzOiBbdTEsIHUyLCB1M10uZmlsdGVyKHggPT4geCksIHZlcmlmaWVkOiBmYWxzZSwgZGF0ZTogRGF0ZS5ub3coKSB9OyBkYXRhLnB1c2gobmV3UG9zdCk7IGF3YWl0IHNhdmVQcmpEQihkYXRhLCBzaGEsIGBIdWI6ICR7dGl0bGV9YCk7IGJhci5zdHlsZS53aWR0aCA9ICIxMDAlIjsgdHh0LmlubmVyVGV4dCA9ICJTVUNDRVNTISI7IGFsZXJ0KCJQcm9qZWN0IFB1Ymxpc2hlZCDwn46JICzij7MgSXQgd2lsbCBhdXRvbWF0aWNhbGx5IGFwcGVhciBvbiB0aGUgd2Vic2l0ZSBpbiBhIGZldyBtaW51dGVzLiEiKTsgbG9jYXRpb24ucmVsb2FkKCk7IH0gY2F0Y2goZSkgeyBhbGVydCgiRXJyb3I6ICIgKyBlLm1lc3NhZ2UpOyBidG4uc3R5bGUucG9pbnRlckV2ZW50cyA9ICJhbGwiOyBiYXIuc3R5bGUud2lkdGggPSAiMCUiOyB0eHQuaW5uZXJUZXh0ID0gIlJFVFJZIjsgfSB9IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVByb2plY3QoaWQsIHBvc3RVVUlEKSB7IGNvbnN0IGlzTWluZSA9IHBvc3RVVUlEID09PSB1c2VyVVVJRDsgY29uc3QgaXNBZG1pbiA9ICh0eXBlb2YgQURNSU5fVVVJRCAhPT0gJ3VuZGVmaW5lZCcgJiYgdXNlclVVSUQgPT09IEFETUlOX1VVSUQpOyBpZiAoIWlzTWluZSAmJiAhaXNBZG1pbikgcmV0dXJuOyBpZiAoY29uZmlybSgiV2FudCB0byBkZWxldGUgdGhpcyBwcm9qZWN0P/CfmKIiKSkgeyBsZXQgbG9jYWxEYXRhID0gW107IHRyeSB7IGxvY2FsRGF0YSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Byal9jYWNoZScpIHx8ICJbXSIpOyB9IGNhdGNoKGUpe30gY29uc3QgbmV3RGF0YSA9IGxvY2FsRGF0YS5maWx0ZXIoeCA9PiB4LmlkICE9PSBpZCk7IGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwcmpfY2FjaGUnLCBKU09OLnN0cmluZ2lmeShuZXdEYXRhKSk7IHJlbmRlclByb2plY3RzKG5ld0RhdGEpOyBzZXRUaW1lb3V0KCgpID0+IHsgYWxlcnQoIvCfl5HvuI8gUFJPSkVDVCBERUxFVEVEIFNVQ0NFU1NGVUxMWSEg4o+zIEl0IHdpbGwgZGlzYXBwZWFyIGZyb20gc2VydmVyIHNob3J0bHkuIik7IH0sIDUwKTsgdHJ5IHsgY29uc3QgeyBzaGEsIGRhdGEgfSA9IGF3YWl0IGdldFByakRCKCk7IGNvbnN0IGZpbHRlcmVkID0gZGF0YS5maWx0ZXIoeCA9PiB4LmlkICE9PSBpZCk7IGF3YWl0IHNhdmVQcmpEQihmaWx0ZXJlZCwgc2hhLCAiUHJvamVjdCBSZW1vdmVkIik7IH0gY2F0Y2goZSkgeyBjb25zb2xlLmVycm9yKCJTZXJ2ZXIgc3luYyBmYWlsZWQsIGJ1dCBsb2NhbCBpcyB1cGRhdGVkLiIpOyB9IH0gfSBhc3luYyBmdW5jdGlvbiB0b2dnbGVWZXJpZnlQcm9qZWN0KGlkKSB7IGlmICh0eXBlb2YgQURNSU5fVVVJRCA9PT0gJ3VuZGVmaW5lZCcgfHwgdXNlclVVSUQgIT09IEFETUlOX1VVSUQpIHJldHVybjsgbGV0IGxvY2FsRGF0YSA9IFtdOyB0cnkgeyBsb2NhbERhdGEgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwcmpfY2FjaGUnKSB8fCAiW10iKTsgfSBjYXRjaChlKXt9IGNvbnN0IGlkeCA9IGxvY2FsRGF0YS5maW5kSW5kZXgoeCA9PiB4LmlkID09PSBpZCk7IGlmKGlkeCA9PT0gLTEpIHJldHVybjsgY29uc3QgY3VycmVudFN0YXR1cyA9IGxvY2FsRGF0YVtpZHhdLnZlcmlmaWVkOyBjb25zdCBhY3Rpb25OYW1lID0gY3VycmVudFN0YXR1cyA/ICJVTlZFUklGWSIgOiAiVkVSSUZZIjsgaWYgKGNvbmZpcm0oYPCfm6HvuI8gRE8gWU9VIFdBTlQgVE8gJHthY3Rpb25OYW1lfSBUSElTIFBST0pFQ1Q/YCkpIHsgbG9jYWxEYXRhW2lkeF0udmVyaWZpZWQgPSAhY3VycmVudFN0YXR1czsgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Byal9jYWNoZScsIEpTT04uc3RyaW5naWZ5KGxvY2FsRGF0YSkpOyByZW5kZXJQcm9qZWN0cyhsb2NhbERhdGEpOyBzZXRUaW1lb3V0KCgpID0+IHsgYWxlcnQoYOKchSBQUk9KRUNUICR7YWN0aW9uTmFtZX1FRCFgKTsgfSwgNTApOyB0cnkgeyBjb25zdCB7IHNoYSwgZGF0YSB9ID0gYXdhaXQgZ2V0UHJqREIoKTsgY29uc3Qgc2VydmVySWR4ID0gZGF0YS5maW5kSW5kZXgoeCA9PiB4LmlkID09PSBpZCk7IGlmKHNlcnZlcklkeCA+IC0xKSB7IGRhdGFbc2VydmVySWR4XS52ZXJpZmllZCA9IGxvY2FsRGF0YVtpZHhdLnZlcmlmaWVkOyBhd2FpdCBzYXZlUHJqREIoZGF0YSwgc2hhLCAiVmVyaWZ5IFN0YXR1cyBVcGRhdGVkIik7IH0gfSBjYXRjaChlKSB7IGNvbnNvbGUuZXJyb3IoIlNlcnZlciBzeW5jIGZhaWxlZC4iKTsgfSB9IH0gbGV0IHVzZXJVVUlEID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ25zX3VzZXJfdXVpZCcpOyBpZiAoIXVzZXJVVUlEKSB7IHVzZXJVVUlEID0gJ3VpZF8nICsgRGF0ZS5ub3coKS50b1N0cmluZygzNikgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMik7IGxvY2FsU3RvcmFnZS5zZXRJdGVtKCduc191c2VyX3V1aWQnLCB1c2VyVVVJRCk7IH0gbGV0IHNhdmVkTmFtZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCduc191c2VyX2ZpeGVkJykgfHwgIiI7IGxldCBzZWxlY3RlZEltZ0Jhc2U2NCA9ICIiOyBhc3luYyBmdW5jdGlvbiBjaGVja1ZlcmlmeVN0YXR1cygpIHsgdHJ5IHsgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goImh0dHBzOiBjb25zdCB2ID0gYXdhaXQgcmVzLmpzb24oKSB8fCB7fTsgaWYodlt1c2VyVVVJRF0gPT09IHRydWUpIHsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ltZ1VwbG9hZEJ0bicpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOyB9IGVsc2UgeyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW1nVXBsb2FkQnRuJykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsgfSB9IGNhdGNoKGUpIHt9IH0gZnVuY3Rpb24gaGFuZGxlRmlsZVNlbGVjdCgpIHsgY29uc3QgZmlsZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ltZ0lucHV0Jyk7IGNvbnN0IGZpbGUgPSBmaWxlSW5wdXQuZmlsZXNbMF07IGlmICghZmlsZSkgcmV0dXJuOyBmZXRjaCgiaHR0cHM6IC50aGVuKHJlcyA9PiByZXMuanNvbigpKSAudGhlbih2ZXJpZmllZExpc3QgPT4geyB2ZXJpZmllZExpc3QgPSB2ZXJpZmllZExpc3QgfHwge307IGlmICh2ZXJpZmllZExpc3RbdXNlclVVSURdICE9PSB0cnVlKSB7IGFsZXJ0KCLwn5SSIE9OTFkgVkVSSUZJRUQgVVNFUlMgQ0FOIFNFTkQgUEhPVE9TLiIpOyBmaWxlSW5wdXQudmFsdWUgPSAiIjsgcmV0dXJuOyB9IGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7IHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbihlKSB7IGNvbnN0IGltZyA9IG5ldyBJbWFnZSgpOyBpbWcuc3JjID0gZS50YXJnZXQucmVzdWx0OyBpbWcub25sb2FkID0gZnVuY3Rpb24oKSB7IGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpOyBjb25zdCBNQVhfV0lEVEggPSA4MDA7IGNvbnN0IHNjYWxlU2l6ZSA9IE1BWF9XSURUSCAvIGltZy53aWR0aDsgY2FudmFzLndpZHRoID0gTUFYX1dJRFRIOyBjYW52YXMuaGVpZ2h0ID0gaW1nLmhlaWdodCAqIHNjYWxlU2l6ZTsgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7IGN0eC5kcmF3SW1hZ2UoaW1nLCAwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpOyBzZWxlY3RlZEltZ0Jhc2U2NCA9IGNhbnZhcy50b0RhdGFVUkwoJ2ltYWdlL2pwZWcnLCAwLjcpOyBjb25zdCBwcmV2aWV3ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ltZ1ByZXZpZXcnKTsgcHJldmlldy5zcmMgPSBzZWxlY3RlZEltZ0Jhc2U2NDsgcHJldmlldy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsgfSB9OyByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTsgfSkgLmNhdGNoKCgpID0+IHsgYWxlcnQoIkVSUk9SIENIRUNLSU5HIFBFUk1JU1NJT05TIik7IGZpbGVJbnB1dC52YWx1ZSA9ICIiOyB9KTsgfSBmdW5jdGlvbiBjbGVhckltYWdlKCkgeyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW1nSW5wdXQnKS52YWx1ZSA9ICIiOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW1nUHJldmlldycpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IHNlbGVjdGVkSW1nQmFzZTY0ID0gIiI7IH0gZnVuY3Rpb24gaW5pdFJlcGx5KGlkLCBuYW1lLCB0ZXh0KSB7IGN1cnJlbnRSZXBseSA9IHsgaWQ6IGlkLCBuYW1lOiBuYW1lLCB0ZXh0OiB0ZXh0IH07IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXBseUJhbm5lcicpLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXBseVRleHQnKS5pbm5lclRleHQgPSBuYW1lICsgIjogIiArIHRleHQ7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1c2VyTXNnJykuZm9jdXMoKTsgfSBmdW5jdGlvbiBjYW5jZWxSZXBseSgpIHsgY3VycmVudFJlcGx5ID0gbnVsbDsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlcGx5QmFubmVyJykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsgfSBmdW5jdGlvbiBzY3JvbGxUb01zZyhpZCkgeyBjb25zdCB0YXJnZXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgbXNnLSR7aWR9YCk7IGlmICh0YXJnZXQpIHsgdGFyZ2V0LnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6ICdzbW9vdGgnLCBibG9jazogJ2NlbnRlcicgfSk7IHRhcmdldC5zdHlsZS50cmFuc2l0aW9uID0gImJhY2tncm91bmQgMC41cyBlYXNlIjsgY29uc3Qgb3JpZ2luYWxCZyA9IHRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kOyB0YXJnZXQuc3R5bGUuYmFja2dyb3VuZCA9ICJyZ2JhKDI1NSwgMCwgMCwgMC4yKSI7IHNldFRpbWVvdXQoKCkgPT4geyB0YXJnZXQuc3R5bGUuYmFja2dyb3VuZCA9IG9yaWdpbmFsQmc7IH0sIDEwMDApOyB9IGVsc2UgeyBhbGVydCgiTWVzc2FnZSBub3QgZm91bmQgKG1pZ2h0IGJlIGRlbGV0ZWQgb3Igbm90IGxvYWRlZCkuIik7IH0gfSBhc3luYyBmdW5jdGlvbiBzZW5kTXNnKCkgeyBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1c2VyTXNnJyk7IGNvbnN0IGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZW5kQnRuJyk7IGxldCBtc2cgPSBpbnB1dC52YWx1ZS50cmltKCk7IGlmICghbXNnICYmICFzZWxlY3RlZEltZ0Jhc2U2NCkgcmV0dXJuOyBpZiAobXNnID09PSAiL3Jlc2V0IikgeyBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnbnNfdXNlcl9maXhlZCcpOyBzYXZlZE5hbWUgPSAiIjsgYWxlcnQoIk5BTUUgUkVTRVQhIik7IGlucHV0LnZhbHVlID0gIiI7IHJldHVybjsgfSBpZiAoIXNhdmVkTmFtZSB8fCBzYXZlZE5hbWUgPT09ICJVU0VSIikgeyBsZXQgZW50ZXJOYW1lID0gcHJvbXB0KCJFTlRFUiBZT1VSIE5BTUU6Iik7IGlmICghZW50ZXJOYW1lIHx8IGVudGVyTmFtZS50cmltKCkgPT09ICIiKSByZXR1cm47IHNhdmVkTmFtZSA9IGVudGVyTmFtZS50cmltKCkudG9VcHBlckNhc2UoKTsgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ25zX3VzZXJfZml4ZWQnLCBzYXZlZE5hbWUpOyB9IGNvbnN0IHBheWxvYWQgPSB7IHVzZXJOYW1lOiBzYXZlZE5hbWUsIHRleHQ6IG1zZywgaW1hZ2U6IHNlbGVjdGVkSW1nQmFzZTY0LCByZXBseTogIiIsIHRpbWVzdGFtcDogRGF0ZS5ub3coKSwgdXVpZDogdXNlclVVSUQsIGlzVmVyaWZpZWQ6IGZhbHNlLCBxdW90ZWQ6IGN1cnJlbnRSZXBseSA/IHsgaWQ6IGN1cnJlbnRSZXBseS5pZCwgbmFtZTogY3VycmVudFJlcGx5Lm5hbWUsIHRleHQ6IGN1cnJlbnRSZXBseS50ZXh0IH0gOiBudWxsIH07IGNvbnN0IG9yaWdpbmFsSFRNTCA9IGJ0bi5pbm5lckhUTUw7IGJ0bi5kaXNhYmxlZCA9IHRydWU7IGJ0bi5pbm5lckhUTUwgPSAnPHNwYW4gY2xhc3M9InJlZC1kb3QtbG9hZGVyIj48L3NwYW4+JzsgdHJ5IHsgY29uc3QgYmFuQ2hlY2sgPSBhd2FpdCBmZXRjaChgaHR0cHM6IGF3YWl0IGZldGNoKERCX1VSTCwgeyBtZXRob2Q6ICdQT1NUJywgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sIGJvZHk6IEpTT04uc3RyaW5naWZ5KHBheWxvYWQpIH0pOyBpbnB1dC52YWx1ZSA9ICIiOyBjbGVhckltYWdlKCk7IGNhbmNlbFJlcGx5KCk7IGF3YWl0IGxvYWRNZXNzYWdlcygpOyB9IGNhdGNoIChlKSB7IGFsZXJ0KCJGQUlMRUQiKTsgfSBmaW5hbGx5IHsgYnRuLmRpc2FibGVkID0gZmFsc2U7IGJ0bi5pbm5lckhUTUwgPSBvcmlnaW5hbEhUTUw7IH0gfSBmdW5jdGlvbiB0b2dnbGVNc2dBY3Rpb25zKGJ1YmJsZSkgeyBjb25zdCBpc0FjdGl2ZSA9IGJ1YmJsZS5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZS1hY3Rpb25zJyk7IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tc2ctYnViYmxlJykuZm9yRWFjaChiID0+IGIuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlLWFjdGlvbnMnKSk7IGlmKCFpc0FjdGl2ZSkgYnViYmxlLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZS1hY3Rpb25zJyk7IH0gYXN5bmMgZnVuY3Rpb24gZGVsZXRlTXlNc2coaWQpIHsgaWYoIWNvbmZpcm0oIkRFTEVURT8iKSkgcmV0dXJuOyB0cnkgeyBhd2FpdCBmZXRjaChgaHR0cHM6IGxvYWRNZXNzYWdlcygpOyB9IGNhdGNoKGUpIHsgYWxlcnQoIkVSUk9SIik7IH0gfSBhc3luYyBmdW5jdGlvbiBsb2FkTWVzc2FnZXMoKSB7IHRyeSB7IGNvbnN0IFtjaGF0UmVzLCB2ZXJpZnlSZXNdID0gYXdhaXQgUHJvbWlzZS5hbGwoWyBmZXRjaChEQl9VUkwpLCBmZXRjaCgiaHR0cHM6IGNvbnN0IGRhdGEgPSBhd2FpdCBjaGF0UmVzLmpzb24oKTsgY29uc3QgdmVyaWZpZWREYXRhID0gYXdhaXQgdmVyaWZ5UmVzLmpzb24oKSB8fCB7fTsgY29uc3QgYm9hcmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbXNnQm9hcmQnKTsgaWYgKCFkYXRhKSB7IGJvYXJkLmlubmVySFRNTCA9ICc8cCBzdHlsZT0ib3BhY2l0eTowLjQ7IHRleHQtYWxpZ246Y2VudGVyOyI+Tk8gTUVTU0FHRVMgWUVULjwvcD4nOyByZXR1cm47IH0gY29uc3QgbWVzc2FnZXMgPSBPYmplY3Qua2V5cyhkYXRhKS5tYXAoa2V5ID0+ICh7IGlkOiBrZXksIC4uLmRhdGFba2V5XSB9KSk7IGJvYXJkLmlubmVySFRNTCA9IG1lc3NhZ2VzLm1hcChtID0+IHsgY29uc3QgaXNVc2VyVmVyaWZpZWQgPSAobS51dWlkICYmIHZlcmlmaWVkRGF0YVttLnV1aWRdID09PSB0cnVlKTsgY29uc3QgdGlja0h0bWwgPSBpc1VzZXJWZXJpZmllZCA/ICc8aSBjbGFzcz0iZmEtc29saWQgZmEtY2lyY2xlLWNoZWNrIiBzdHlsZT0iY29sb3I6IzFkYTFmMjsgbWFyZ2luLWxlZnQ6NHB4OyBmb250LXNpemU6MC44cmVtOyI+PC9pPicgOiAnJzsgY29uc3QgaXNNZSA9IG0udXVpZCA9PT0gdXNlclVVSUQ7IGNvbnN0IGFsaWduQ2xhc3MgPSBpc01lID8gJ3NlbGYnIDogJyc7IGNvbnN0IGRlbGV0ZUJ0biA9IGlzTWUgPyBgPHNwYW4gY2xhc3M9ImFjdGlvbi1idG4gZGVsLWJ0biIgb25jbGljaz0iZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7IGRlbGV0ZU15TXNnKCcke20uaWR9JykiPjxpIGNsYXNzPSJmYS1zb2xpZCBmYS10cmFzaCI+PC9pPiBERUxFVEU8L3NwYW4+YCA6ICcnOyBsZXQgcXVvdGVkSHRtbCA9ICcnOyBpZiAobS5xdW90ZWQpIHsgY29uc3QgcmVwbHlJZCA9IG0ucXVvdGVkLmlkIHx8ICcnOyBjb25zdCBjbGlja0FjdGlvbiA9IHJlcGx5SWQgPyBgb25jbGljaz0iZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7IHNjcm9sbFRvTXNnKCcke3JlcGx5SWR9JykiYCA6ICcnOyBxdW90ZWRIdG1sID0gYDxkaXYgY2xhc3M9InF1b3RlZC1ibG9jayIgJHtjbGlja0FjdGlvbn0gc3R5bGU9IiR7cmVwbHlJZCA/ICdjdXJzb3I6cG9pbnRlcjsnIDogJyd9Ij4gPHNwYW4gY2xhc3M9InEtbmFtZSI+JHttLnF1b3RlZC5uYW1lfTwvc3Bhbj4gPHNwYW4gY2xhc3M9InEtdGV4dCI+JHttLnF1b3RlZC50ZXh0fTwvc3Bhbj4gPC9kaXY+YDsgfSByZXR1cm4gYCA8ZGl2IGlkPSJtc2ctJHttLmlkfSIgY2xhc3M9Im1zZy1idWJibGUgJHthbGlnbkNsYXNzfSIgc3R5bGU9InVzZXItc2VsZWN0OiBub25lOyIgb25jbGljaz0idG9nZ2xlTXNnQWN0aW9ucyh0aGlzKSI+IDxzcGFuIGNsYXNzPSJ1LWJhZGdlIiBvbmNsaWNrPSJoYW5kbGVBZG1pblRhcChldmVudCwgJyR7bS5pZH0nLCAnJHttLnVzZXJOYW1lfScsICR7aXNVc2VyVmVyaWZpZWR9LCAnJHttLnV1aWR9JykiPiAke20udXNlck5hbWUgfHwgJ1VTRVInfSAke3RpY2tIdG1sfSA8L3NwYW4+ICR7cXVvdGVkSHRtbH0gJHttLmltYWdlID8gYDxpbWcgc3JjPSIke20uaW1hZ2V9IiBjbGFzcz0ibXNnLWltZyIgb25jbGljaz0ib3BlbkltYWdlVmlld2VyKHRoaXMuc3JjKSI+YCA6ICcnfSA8cCBzdHlsZT0idGV4dC10cmFuc2Zvcm06bm9uZTsgbWFyZ2luOjVweCAwOyI+JHttLnRleHR9PC9wPiAke20ucmVwbHkgPyBgPGRpdiBjbGFzcz0iYWRtaW4tcmVwbHktYm94Ij48c3BhbiBjbGFzcz0iYWRtaW4tdGFnIj7il48gQURNSU4gUkVQTFk8L3NwYW4+PHAgc3R5bGU9InRleHQtdHJhbnNmb3JtOm5vbmU7IG9wYWNpdHk6MC44OyI+JHttLnJlcGx5fTwvcD48L2Rpdj5gIDogJyd9IDxkaXYgY2xhc3M9Im1zZy1mb290ZXIiPiA8c3BhbiBjbGFzcz0iYWN0aW9uLWJ0biIgb25jbGljaz0iZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7IGluaXRSZXBseSgnJHttLmlkfScsICcke20udXNlck5hbWV9JywgJyR7bS50ZXh0LnJlcGxhY2UoLycvZywgIlxcJyIpfScpIj4gPGkgY2xhc3M9ImZhLXNvbGlkIGZhLXJlcGx5Ij48L2k+IFJFUExZIDwvc3Bhbj4gJHtkZWxldGVCdG59IDwvZGl2PiA8L2Rpdj5gOyB9KS5qb2luKCcnKTsgYm9hcmQuc2Nyb2xsVG9wID0gYm9hcmQuc2Nyb2xsSGVpZ2h0OyB9IGNhdGNoIChlKSB7IGNvbnNvbGUubG9nKGUpOyB9IH0gbGV0IGFkbWluVGFwQ291bnQgPSAwOyBsZXQgYWRtaW5UYXBUaW1lcjsgZnVuY3Rpb24gaGFuZGxlQWRtaW5UYXAoZXZlbnQsIGlkLCBuYW1lLCB2ZXJpZmllZCwgdXVpZCkgeyBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsgaWYgKHVzZXJVVUlEICE9PSBBRE1JTl9VVUlEKSByZXR1cm47IGFkbWluVGFwQ291bnQrKzsgY2xlYXJUaW1lb3V0KGFkbWluVGFwVGltZXIpOyBpZiAoYWRtaW5UYXBDb3VudCA9PT0gMikgeyBhZG1pblRhcENvdW50ID0gMDsgaWYgKG5hdmlnYXRvci52aWJyYXRlKSBuYXZpZ2F0b3IudmlicmF0ZShbNTAsIDUwLCA1MF0pOyBhZG1pbkNvbnRyb2woaWQsIG5hbWUsIHZlcmlmaWVkLCB1dWlkKTsgfSBlbHNlIHsgYWRtaW5UYXBUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4geyBhZG1pblRhcENvdW50ID0gMDsgfSwgNDAwKTsgfSB9IGFzeW5jIGZ1bmN0aW9uIGFkbWluQ29udHJvbChtc2dJZCwgY3VycmVudE5hbWUsIGN1cnJlbnRTdGF0dXMsIHRhcmdldFVVSUQpIHsgY29uc3QgcGFzcyA9IHByb21wdCgiQURNSU4gUEFTU1dPUkQ6Iik7IGlmICghcGFzcykgcmV0dXJuOyBpZiAoc3RyaW5nVG9IYXNoKHBhc3MpID09PSAiMTU0MDIxODM3MCIpIHsgY29uc3QgYWN0aW9uID0gcHJvbXB0KGBNQU5BR0U6ICR7Y3VycmVudE5hbWV9XG5VVUlEOiAke3RhcmdldFVVSUQgPyAnRk9VTkQnIDogJ01JU1NJTkcnfVxuXG4xLlJFUExZIDIuREVMRVRFIEFMTCAzLkRFTEVURSBTSU5HTEUgNC4ke2N1cnJlbnRTdGF0dXMgPyAnVU5WRVJJRlknIDogJ1ZFUklGWSd9IDUuQkFOIDYuVU5CQU5gKTsgY29uc3QgdXJsID0gYGh0dHBzOiBjb25zdCBiYW5VcmwgPSBgaHR0cHM6IGNvbnN0IHZlcmlmeVVybCA9IGBodHRwczogaWYgKGFjdGlvbiA9PT0gIjEiKSB7IGNvbnN0IHR4dCA9IHByb21wdCgiUkVQTFk6Iik7IGlmKHR4dCkgYXdhaXQgZmV0Y2godXJsLCB7IG1ldGhvZDogJ1BBVENIJywgYm9keTogSlNPTi5zdHJpbmdpZnkoeyByZXBseTogdHh0IH0pIH0pOyB9IGVsc2UgaWYgKGFjdGlvbiA9PT0gIjIiKSB7IGlmKHRhcmdldFVVSUQgJiYgY29uZmlybSgi4pqg77iPIERFTEVURSBBTEwgTUVTU0FHRVMgRlJPTSBUSElTIFVTRVI/IikpIHsgY29uc3QgYWxsTXNnUmVzID0gYXdhaXQgZmV0Y2goREJfVVJMKTsgY29uc3QgYWxsRGF0YSA9IGF3YWl0IGFsbE1zZ1Jlcy5qc29uKCk7IGlmKGFsbERhdGEpIHsgY29uc3QgcHJvbWlzZXMgPSBbXTsgT2JqZWN0LmtleXMoYWxsRGF0YSkuZm9yRWFjaChrZXkgPT4geyBpZihhbGxEYXRhW2tleV0udXVpZCA9PT0gdGFyZ2V0VVVJRCkgeyBwcm9taXNlcy5wdXNoKGZldGNoKGBodHRwczogfSB9KTsgYXdhaXQgUHJvbWlzZS5hbGwocHJvbWlzZXMpOyBhbGVydCgiQUxMIE1FU1NBR0VTIERFTEVURUQhIik7IH0gfSB9IGVsc2UgaWYgKGFjdGlvbiA9PT0gIjMiKSB7IGlmKGNvbmZpcm0oIkRFTEVURSBUSElTIE1FU1NBR0U/IikpIGF3YWl0IGZldGNoKHVybCwgeyBtZXRob2Q6ICdERUxFVEUnIH0pOyB9IGVsc2UgaWYgKGFjdGlvbiA9PT0gIjQiKSB7IGlmICghdGFyZ2V0VVVJRCkgeyBhbGVydCgiTk8gVVVJRCIpOyByZXR1cm47IH0gaWYgKGN1cnJlbnRTdGF0dXMpIHsgYXdhaXQgZmV0Y2godmVyaWZ5VXJsLCB7IG1ldGhvZDogJ0RFTEVURScgfSk7IGFsZXJ0KCJVTlZFUklGSUVEIik7IH0gZWxzZSB7IGF3YWl0IGZldGNoKHZlcmlmeVVybCwgeyBtZXRob2Q6ICdQVVQnLCBib2R5OiBKU09OLnN0cmluZ2lmeSh0cnVlKSB9KTsgYWxlcnQoIlZFUklGSUVEIik7IH0gfSBlbHNlIGlmIChhY3Rpb24gPT09ICI1IikgeyBpZih0YXJnZXRVVUlEICYmIGNvbmZpcm0oIkJBTj8iKSkgeyBhd2FpdCBmZXRjaChiYW5VcmwsIHsgbWV0aG9kOiAnUFVUJywgYm9keTogSlNPTi5zdHJpbmdpZnkodHJ1ZSkgfSk7IGFsZXJ0KCJCQU5ORUQiKTsgfSB9IGVsc2UgaWYgKGFjdGlvbiA9PT0gIjYiKSB7IGlmKHRhcmdldFVVSUQpIHsgYXdhaXQgZmV0Y2goYmFuVXJsLCB7IG1ldGhvZDogJ0RFTEVURScgfSk7IGFsZXJ0KCJVTkJBTk5FRCIpOyB9IH0gbG9hZE1lc3NhZ2VzKCk7IH0gZWxzZSBhbGVydCgiV1JPTkcgUEFTU1dPUkQhIik7IH0gZnVuY3Rpb24gc3RyaW5nVG9IYXNoKHN0cmluZykgeyBsZXQgaGFzaCA9IDA7IGlmIChzdHJpbmcubGVuZ3RoID09PSAwKSByZXR1cm4gaGFzaDsgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHJpbmcubGVuZ3RoOyBpKyspIHsgY29uc3QgY2hhciA9IHN0cmluZy5jaGFyQ29kZUF0KGkpOyBoYXNoID0gKChoYXNoIDw8IDUpIC0gaGFzaCkgKyBjaGFyOyBoYXNoID0gaGFzaCAmIGhhc2g7IH0gcmV0dXJuIGhhc2gudG9TdHJpbmcoKTsgfSBhc3luYyBmdW5jdGlvbiBpbml0UHJlc2V0RGF0YSgpIHsgY29uc3QgZ3JpZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmVzZXRHcmlkJyk7IGdyaWQuaW5uZXJIVE1MID0gIjxwIHN0eWxlPSdwYWRkaW5nOjIwcHg7IHRleHQtYWxpZ246Y2VudGVyOyc+TE9BRElORyBQUkVTRVRTLi4uPC9wPiI7IHRyeSB7IGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKCJodHRwczogYXN5bmMgZnVuY3Rpb24gaW5pdFdhbGxwYXBlckRhdGEoKSB7IGNvbnN0IGdyaWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2FsbHBhcGVyR3JpZCcpOyBncmlkLmlubmVySFRNTCA9ICI8cCBzdHlsZT0ncGFkZGluZzoyMHB4OyB0ZXh0LWFsaWduOmNlbnRlcjsnPkxPQURJTkcgV0FMTFBBUEVSUy4uLjwvcD4iOyB0cnkgeyBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCgiaHR0cHM6IGFzeW5jIGZ1bmN0aW9uIGRvd25sb2FkQUlXYWxsKGJ0bikgeyBydW5Eb3dubG9hZChidG4sIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhaUltZycpLnNyYyk7IH0gZnVuY3Rpb24gb3BlbkltYWdlVmlld2VyKHNyYykgeyBjb25zdCB2aWV3ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW1nVmlld2VyJyk7IGNvbnN0IGltZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2aWV3SW1nJyk7IGltZy5zcmMgPSBzcmM7IHZpZXdlci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOyBzZXRUaW1lb3V0KCgpID0+IHZpZXdlci5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKSwgMTApOyB9IGZ1bmN0aW9uIGNsb3NlSW1hZ2VWaWV3ZXIoKSB7IGNvbnN0IHZpZXdlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbWdWaWV3ZXInKTsgdmlld2VyLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpOyBzZXRUaW1lb3V0KCgpID0+IHsgdmlld2VyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2aWV3SW1nJykuc3JjID0gIiI7IH0sIDMwMCk7IH0gZnVuY3Rpb24gZG93bmxvYWRWaWV3SW1hZ2UoKSB7IGNvbnN0IHNyYyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2aWV3SW1nJykuc3JjOyBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOyBhLmhyZWYgPSBzcmM7IGEuZG93bmxvYWQgPSAiTm90aGluZ19Db21tdW5pdHlfSW1nXyIgKyBEYXRlLm5vdygpICsgIi5qcGciOyBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpOyBhLmNsaWNrKCk7IGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoYSk7IH0gZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCBmdW5jdGlvbihlKSB7IGlmIChlLnRhcmdldC50YWdOYW1lID09PSAnSU1HJykgeyBlLnByZXZlbnREZWZhdWx0KCk7IH0gfSwgZmFsc2UpOw=="))
